import{w as f,a as g,f as j,b as N,g as y,c as w,r as u,F as h}from"./chunk-WWGJGFF6-C0NtPc5H.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as v}from"./AdminLayout-Buts2ej8.js";import{c as k}from"./utils-BQHNewu7.js";import{t as a}from"./index-XQpFve_7.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./index-Dc7LDrXT.js";const F=f(function(){const{item:t}=g(),s=j(),i=N(),b=y();w();const l=b.state!=="idle",r=!t,[n,d]=u.useState(t?.iconUrl||"");return u.useEffect(()=>{s?.success?s.deleted?(a.success(s.message||"Item deleted"),i("/admin/items")):(a.success(s.message||"Saved"),r&&i("/admin/items")):s?.error&&a.error(s.error)},[s,i,r]),e.jsx(v,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-black italic tracking-tighter text-white uppercase",children:r?"Create New Item":`Edit: ${t.name}`}),e.jsx("p",{className:"text-white/40 text-sm font-medium",children:"Configure item pricing, type, and icon."})]}),e.jsxs("div",{className:"flex gap-3",children:[!r&&e.jsxs(h,{method:"post",onSubmit:c=>{confirm("Are you sure? This item will be removed from the store.")||c.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_action",value:"delete"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-red-500/10 text-red-500 border border-red-500/20 rounded-xl font-bold text-sm hover:bg-red-500 hover:text-white transition-all",children:"DELETE"})]}),e.jsx("button",{onClick:()=>i("/admin/items"),className:"px-6 py-3 bg-white/5 text-white/60 rounded-xl font-bold text-sm hover:text-white transition-all",children:"CANCEL"})]})]}),e.jsx("div",{className:"bg-[#1A1821]/60 border border-white/5 rounded-[40px] p-8",children:e.jsxs(h,{method:"post",className:"space-y-8",children:[e.jsx("input",{type:"hidden",name:"iconUrl",value:n}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1 space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2 block italic",children:"Item Icon"}),e.jsxs("div",{className:"aspect-square bg-black/40 border border-white/10 rounded-3xl flex items-center justify-center relative group overflow-hidden border-dashed hover:border-primary/50 transition-colors",children:[n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n,alt:"Preview",className:"w-2/3 h-2/3 object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>d(""),className:"p-2 bg-red-500 rounded-lg text-white",children:e.jsx("span",{className:"material-symbols-outlined",children:"delete"})})})]}):e.jsxs("button",{type:"button",onClick:()=>document.getElementById("icon-upload")?.click(),className:"flex flex-col items-center gap-2 text-white/20 hover:text-primary transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_photo_alternate"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"Upload Icon"})]}),e.jsx("input",{type:"file",id:"icon-upload",className:"hidden",accept:"image/*",onChange:async c=>{const p=c.target.files?.[0];if(!p)return;const m=a.loading("Uploading icon...");try{const o=new FormData;o.append("file",p);const x=await(await fetch("/api/upload",{method:"POST",body:o})).json();x.url&&(d(x.url),a.success("Icon uploaded!",{id:m}))}catch{a.error("Upload failed",{id:m})}}})]}),e.jsx("p",{className:"text-[9px] text-white/20 italic text-center uppercase tracking-tighter",children:"Recommended: Transparent PNG, 200x200"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Item Name"}),e.jsx("input",{name:"name",defaultValue:t?.name,placeholder:"e.g. Red Heart, Golden Rose",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Type"}),e.jsxs("select",{name:"type",defaultValue:t?.type||"GIFT",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold appearance-none cursor-pointer",children:[e.jsx("option",{value:"GIFT",children:"Gift (Send to AI)"}),e.jsx("option",{value:"CONSUMABLE",children:"Consumable (Self-use)"}),e.jsx("option",{value:"CURRENCY",children:"Token (Internal Economy)"})]})]}),e.jsx("div",{className:"flex items-end pb-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group px-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",name:"isActive",value:"true",defaultChecked:t?.isActive??!0,className:"sr-only peer"}),e.jsx("div",{className:"w-12 h-6 bg-white/10 rounded-full peer peer-checked:bg-primary transition-all duration-300"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full peer-checked:translate-x-6 transition-all duration-300"})]}),e.jsx("span",{className:"text-sm font-black text-white/40 group-hover:text-white transition-colors uppercase tracking-widest",children:"Active in Store"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:t?.description||"",placeholder:"Explain what this item does or represents...",rows:3,className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-medium resize-none"})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-white/5 space-y-6",children:[e.jsxs("h2",{className:"text-xs font-black text-primary uppercase tracking-[0.3em] flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"payments"}),"Price Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"CHOCO Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"priceChoco",type:"number",defaultValue:t?.priceChoco||t?.priceCredits||0,className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold pr-12"}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-primary font-black text-[10px] uppercase",children:"CHOCO"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.2em] ml-2",children:"Credits (Deprecated)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"priceCredits",type:"number",defaultValue:t?.priceCredits||0,className:"w-full bg-black/20 border border-white/5 rounded-2xl px-6 py-4 text-white/40 focus:outline-none focus:border-primary/30 transition-all font-bold pr-12",disabled:!0}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-white/10 font-black text-[10px] uppercase",children:"CR"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Direct KRW"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"priceKRW",type:"number",defaultValue:t?.priceKRW||0,className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold pr-12"}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-white/20 font-black text-[10px] uppercase",children:"â‚©"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Direct USD"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"priceUSD",type:"number",step:"0.01",defaultValue:t?.priceUSD||0,className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold pr-12"}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-white/20 font-black text-[10px] uppercase",children:"$"})]})]})]}),e.jsx("p",{className:"text-[9px] text-white/20 italic uppercase tracking-tighter",children:"* Direct prices are used when purchasing bypassing token refills."})]}),e.jsx("div",{className:"pt-4 flex flex-col gap-4",children:e.jsx("button",{type:"submit",disabled:l,className:k("w-full py-6 bg-primary text-[#0B0A10] rounded-[32px] font-black italic text-xl tracking-tighter transition-all hover:scale-[1.02] shadow-[0_10px_40px_rgba(255,0,255,0.4)] flex items-center justify-center gap-3",l&&"opacity-50 cursor-not-allowed"),children:l?e.jsx("span",{className:"w-6 h-6 border-4 border-black border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined font-bold",children:"diamond"}),r?"CREATE STORE ITEM":"UPDATE ITEM SETTINGS"]})})})]})})]})})});export{F as default};
