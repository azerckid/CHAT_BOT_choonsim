import{w as b,a as j,f,b as w,g as y,c as g,r as d,F as l}from"./chunk-WWGJGFF6-C0NtPc5H.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as N}from"./AdminLayout-Buts2ej8.js";import{c as r}from"./utils-BQHNewu7.js";import{t as o}from"./index-XQpFve_7.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./index-Dc7LDrXT.js";const T=b(function(){const{user:s,allItems:x}=j(),a=f(),n=w(),p=y(),m=g(),c=p.state!=="idle",[i,h]=d.useState("profile");return d.useEffect(()=>{a?.success?(o.success(a.message||"Success"),a.deleted?n("/admin/users"):m.revalidate()):a?.error&&o.error(a.error)},[a,n]),e.jsx(N,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter text-white uppercase truncate max-w-md",children:["User: ",e.jsx("span",{className:"text-primary",children:s.name||s.email})]}),e.jsx("p",{className:"text-white/40 text-sm font-medium",children:"Manage permissions, CHOCO balances, and inventory."})]}),e.jsx("button",{onClick:()=>n("/admin/users"),className:"px-6 py-3 bg-white/5 text-white/60 rounded-xl font-bold text-sm hover:text-white transition-all underline decoration-primary/30 underline-offset-4",children:"BACK TO LIST"})]}),e.jsx("div",{className:"flex gap-2 p-1 bg-[#1A1821] rounded-2xl w-fit border border-white/5 overflow-x-auto scrollbar-hide",children:["profile","inventory","payments"].map(t=>e.jsx("button",{onClick:()=>h(t),className:r("px-6 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all whitespace-nowrap",i===t?"bg-primary text-black shadow-lg shadow-primary/20":"text-white/40 hover:text-white"),children:t},t))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-[#1A1821] border border-white/5 rounded-[40px] p-8 text-center space-y-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-3xl bg-black/40 border border-white/10 flex items-center justify-center font-black text-primary italic text-3xl mx-auto border-dashed",children:s.name?.[0]?.toUpperCase()||s.email?.[0]?.toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black italic text-white uppercase tracking-tighter truncate",children:s.name||"N/A"}),e.jsx("p",{className:"text-white/40 text-xs font-medium truncate",children:s.email})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx("span",{className:r("px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest",s.role==="admin"?"bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-white/10 text-white/40"),children:s.role}),e.jsx("span",{className:r("px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest bg-primary text-black"),children:s.subscriptionTier||"FREE"})]})]}),e.jsxs("div",{className:"bg-[#1A1821]/60 border border-white/5 rounded-[32px] p-6 space-y-4",children:[e.jsx("h3",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.2em] ml-2",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-white/40",children:"CHOCO"}),e.jsxs("span",{className:"text-primary font-black italic",children:[s.chocoBalance?parseFloat(s.chocoBalance).toLocaleString():"0"," CHOCO"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-white/40",children:"Inventory"}),e.jsxs("span",{className:"text-white font-medium",children:[s.UserInventory.length," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-white/40",children:"Status"}),e.jsx("span",{className:r("font-black capitalize",s.subscriptionStatus==="active"?"text-primary":"text-white/20"),children:s.subscriptionStatus||"inactive"})]})]})]}),i==="profile"&&e.jsxs(l,{method:"post",onSubmit:t=>{confirm("Are you sure? This action cannot be undone.")||t.preventDefault()},children:[e.jsx("input",{type:"hidden",name:"_action",value:"delete_user"}),e.jsx("button",{type:"submit",className:"w-full py-4 bg-red-500/10 text-red-500 border border-red-500/20 rounded-2xl font-black italic text-xs uppercase hover:bg-red-500 hover:text-white transition-all tracking-widest shadow-xl shadow-red-500/5",children:"DELETE ACCOUNT"})]})]}),e.jsx("div",{className:"md:col-span-2",children:i==="profile"?e.jsx("div",{className:"bg-[#1A1821] border border-white/5 rounded-[40px] p-8",children:e.jsxs(l,{method:"post",className:"space-y-8",children:[e.jsx("input",{type:"hidden",name:"_action",value:"update_user"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2 block italic",children:"User Role"}),e.jsxs("select",{name:"role",defaultValue:s.role||"user",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold appearance-none cursor-pointer",children:[e.jsx("option",{value:"user",children:"Standard User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Administrator"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2 block italic",children:"CHOCO Balance"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"chocoBalance",type:"text",defaultValue:s.chocoBalance||"0",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold pr-16"}),e.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-primary font-black text-[10px] uppercase",children:"CHOCO"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2 block italic",children:"Subscription Tier"}),e.jsxs("select",{name:"tier",defaultValue:s.subscriptionTier||"FREE",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold appearance-none cursor-pointer",children:[e.jsx("option",{value:"FREE",children:"FREE"}),e.jsx("option",{value:"BASIC",children:"BASIC"}),e.jsx("option",{value:"PREMIUM",children:"PREMIUM"}),e.jsx("option",{value:"ULTIMATE",children:"ULTIMATE"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.2em] ml-2 block italic",children:"Subscription Status"}),e.jsxs("select",{name:"subscriptionStatus",defaultValue:s.subscriptionStatus||"inactive",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold appearance-none cursor-pointer",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"canceled",children:"Canceled"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:c,className:r("w-full py-6 bg-primary text-[#0B0A10] rounded-[32px] font-black italic text-xl tracking-tighter transition-all hover:scale-[1.02] shadow-[0_10px_40px_rgba(255,0,255,0.4)] flex items-center justify-center gap-3",c&&"opacity-50 cursor-not-allowed"),children:c?e.jsx("span",{className:"w-6 h-6 border-4 border-black border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined font-bold",children:"save"}),"APPLY CHANGES"]})})})]})}):i==="inventory"?e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"bg-[#1A1821] border border-white/5 rounded-[40px] p-8 space-y-6",children:[e.jsxs("h3",{className:"text-xs font-black text-white/60 uppercase tracking-[0.3em] flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-sm font-bold",children:"card_giftcard"}),"Manual Item Grant"]}),e.jsxs(l,{method:"post",className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsx("input",{type:"hidden",name:"_action",value:"grant_item"}),e.jsxs("div",{className:"md:col-span-1 space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.2em] ml-2",children:"Select Item"}),e.jsx("select",{name:"itemId",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold",children:x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.2em] ml-2",children:"Quantity"}),e.jsx("input",{name:"quantity",type:"number",defaultValue:1,min:1,className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-white focus:outline-none focus:border-primary/50 transition-all font-bold"})]}),e.jsx("button",{type:"submit",className:"py-4 bg-primary text-black rounded-2xl font-black italic uppercase tracking-tighter hover:scale-105 transition-all",children:"GRANT"})]})]}),e.jsxs("div",{className:"bg-[#1A1821] border border-white/5 rounded-[40px] overflow-hidden",children:[e.jsxs("h3",{className:"p-8 pb-4 text-xs font-black text-white/60 uppercase tracking-[0.3em] flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-sm font-bold",children:"inventory"}),"Current Inventory"]}),e.jsx("div",{className:"divide-y divide-white/5",children:s.UserInventory.length===0?e.jsx("div",{className:"p-12 text-center text-white/20 italic text-xs font-bold uppercase tracking-widest",children:"Inventory is empty."}):s.UserInventory.map(t=>e.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-white/2 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-black/40 border border-white/10 flex items-center justify-center",children:t.item.iconUrl?e.jsx("img",{src:t.item.iconUrl,alt:t.item.name,className:"w-8 h-8 object-contain"}):e.jsx("span",{className:"material-symbols-outlined text-primary/40",children:"token"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:t.item.name}),e.jsxs("p",{className:"text-[10px] text-white/40 font-black italic",children:[t.quantity," UNITS"]})]})]}),e.jsxs(l,{method:"post",onSubmit:u=>!confirm("Remove this item?")&&u.preventDefault(),children:[e.jsx("input",{type:"hidden",name:"_action",value:"remove_item"}),e.jsx("input",{type:"hidden",name:"inventoryId",value:t.id}),e.jsx("button",{className:"w-10 h-10 rounded-xl bg-red-500/10 text-red-500 border border-red-500/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:text-white",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})]},t.id))})]})]}):e.jsxs("div",{className:"bg-[#1A1821] border border-white/5 rounded-[40px] overflow-hidden animate-in fade-in duration-500",children:[e.jsxs("h3",{className:"p-8 pb-4 text-xs font-black text-white/60 uppercase tracking-[0.3em] flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-sm font-bold",children:"receipt_long"}),"Payment History"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5 bg-white/2",children:[e.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-white/20 uppercase tracking-widest",children:"Date"}),e.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-white/20 uppercase tracking-widest",children:"Provider"}),e.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-white/20 uppercase tracking-widest",children:"Amount"}),e.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-white/20 uppercase tracking-widest",children:"CHOCO Granted"}),e.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-white/20 uppercase tracking-widest text-right",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:s.payments.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-8 py-20 text-center text-white/10 italic text-xs font-bold uppercase tracking-widest",children:"No payment records."})}):s.payments.map(t=>e.jsxs("tr",{className:"hover:bg-white/1 transition-colors",children:[e.jsx("td",{className:"px-8 py-4 text-[11px] text-white/40 font-medium whitespace-nowrap",children:new Date(t.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-tighter bg-white/5 px-2 py-0.5 rounded",children:t.provider})}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("span",{className:"text-xs font-bold text-white",children:["$",t.amount]})}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("span",{className:"text-xs font-black text-primary italic",children:["+",t.creditsGranted||"0"," CHOCO"]})}),e.jsx("td",{className:"px-8 py-4 text-right",children:e.jsx("span",{className:r("text-[9px] font-black uppercase px-2 py-0.5 rounded shadow-sm",t.status==="COMPLETED"?"bg-green-500/20 text-green-400 border border-green-500/20":t.status==="PENDING"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/20":"bg-red-500/20 text-red-400 border border-red-500/20"),children:t.status})})]},t.id))})]})})]})})]})]})})});export{T as default};
