import{r as a,L as te,w as se,a as ae,b as re}from"./chunk-WWGJGFF6-C0NtPc5H.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{s as le}from"./auth-client-DZcL3Ks9.js";import{c as T}from"./utils-BQHNewu7.js";import{N as p,q as ne,E as U,r as ie,f as de,s as Y,t as R,v as oe,w as ce,x as ue,y as xe,z as fe,A as me,D as M,b as A,c as B,d as _,e as F,B as j,C as z}from"./dialog-Dd6_L6Vt.js";import{t as I}from"./index-XQpFve_7.js";import{B as he}from"./BottomNavigation-vdZES2hj.js";import{a as be}from"./index-Dc7LDrXT.js";import{c as pe,W as ge}from"./wallet-BD6zqWLa.js";import{C as ve}from"./copy-BnkQp-a_.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./index.min-BJIztz5B.js";const ke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],q=pe("triangle-alert",ke);function je({controlled:t,default:s,name:r,state:n="value"}){const{current:o}=a.useRef(t!==void 0),[c,u]=a.useState(s),l=o?t:c,f=a.useCallback(h=>{o||u(h)},[]);return[l,f]}function w({icon:t,iconBgColor:s,label:r,onClick:n,href:o,rightElement:c,className:u}){const l=e.jsxs("div",{className:T("flex items-center gap-4 p-4 min-h-14 justify-between border-b border-black/5 dark:border-white/5 last:border-0 hover:bg-black/5 dark:hover:bg-white/5 transition-colors",o||n?"cursor-pointer group":"",u),onClick:n,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:T("text-white flex items-center justify-center rounded-full shrink-0 size-8",s),children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:t})}),e.jsx("p",{className:"text-slate-900 dark:text-white text-base font-medium flex-1 truncate",children:r})]}),c||(o||n?e.jsx("div",{className:"shrink-0 text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chevron_right"})}):null)]});return o?e.jsx(te,{to:o,children:l}):l}function G({checked:t,onChange:s,className:r}){return e.jsxs("label",{className:T("relative flex h-[30px] w-[50px] cursor-pointer items-center rounded-full border-none bg-slate-200 dark:bg-slate-700 p-1 transition-colors duration-200",t&&"justify-end bg-primary",r),children:[e.jsx("div",{className:"h-[22px] w-[22px] rounded-full bg-white shadow-sm transition-all duration-200"}),e.jsx("input",{type:"checkbox",checked:t,onChange:n=>s(n.target.checked),className:"invisible absolute"})]})}let X=(function(t){return t.disabled="data-disabled",t.valid="data-valid",t.invalid="data-invalid",t.touched="data-touched",t.dirty="data-dirty",t.filled="data-filled",t.focused="data-focused",t})({});const we={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},Ne={valid(t){return t===null?null:t?{[X.valid]:""}:{[X.invalid]:""}}},ye=a.createContext({invalid:void 0,name:void 0,validityData:{state:we,errors:[],error:"",value:"",initialValue:null},setValidityData:p,disabled:void 0,touched:!1,setTouched:p,dirty:!1,setDirty:p,filled:!1,setFilled:p,focused:!1,setFocused:p,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(t=U)=>t,getInputValidationProps:(t=U)=>t,inputRef:{current:null},commit:async()=>{}}});function J(t=!0){const s=a.useContext(ye);if(s.setValidityData===p&&!t)throw new Error(ne(28));return s}const Ce=a.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:p,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function Ee(){return a.useContext(Ce)}const Ie=a.createContext({controlId:void 0,registerControlId:p,labelId:void 0,setLabelId:p,messageIds:[],setMessageIds:p,getDescriptionProps:t=>t});function H(){return a.useContext(Ie)}function Re(t,s){return{...t,state:{...t.state,valid:!s&&t.state.valid}}}function De(t={}){const{id:s,implicit:r=!1,controlRef:n}=t,{controlId:o,registerControlId:c}=H(),u=ie(s),l=r?o:void 0,f=de(()=>Symbol("labelable-control")),h=a.useRef(!1),x=a.useRef(s!=null),m=Y(()=>{!h.current||c===p||(h.current=!1,c(f.current,void 0))});return R(()=>{if(c===p)return;let d;if(r){const i=n?.current;oe(i)&&i.closest("label")!=null?d=s??null:d=l??u}else if(s!=null)x.current=!0,d=s;else if(x.current)d=u;else{m();return}if(d===void 0){m();return}h.current=!0,c(f.current,d)},[s,n,l,c,r,u,f,m]),a.useEffect(()=>m,[m]),o??u}function Ve(t){const{enabled:s=!0,value:r,id:n,name:o,controlRef:c,commit:u}=t,{formRef:l}=Ee(),{invalid:f,markedDirtyRef:h,validityData:x,setValidityData:m}=J(),d=Y(t.getValue);R(()=>{if(!s)return;let i=r;i===void 0&&(i=d()),x.initialValue===null&&i!==null&&m(b=>({...b,initialValue:i}))},[s,m,r,x.initialValue,d]),R(()=>{!s||!n||l.current.fields.set(n,{getValue:d,name:o,controlRef:c,validityData:Re(x,f),validate(i=!0){let b=r;b===void 0&&(b=d()),h.current=!0,i?be.flushSync(()=>u(b)):u(b)}})},[u,c,s,l,d,n,f,h,o,x,r]),R(()=>{const i=l.current.fields;return()=>{n&&i.delete(n)}},[l,n])}const Se=a.forwardRef(function(s,r){const{render:n,className:o,id:c,name:u,value:l,disabled:f=!1,onValueChange:h,defaultValue:x,autoFocus:m=!1,...d}=s,{state:i,name:b,disabled:S,setTouched:D,setDirty:V,validityData:N,setFocused:y,setFilled:C,validationMode:L,validation:g}=J(),k=S||f,E=b??u,Z={...i,disabled:k},{labelId:$}=H(),W=De({id:c});R(()=>{const v=l!=null;g.inputRef.current?.value||v&&l!==""?C(!0):v&&l===""&&C(!1)},[g.inputRef,C,l]);const O=a.useRef(null);R(()=>{m&&O.current===ce(ue(O.current))&&y(!0)},[m,y]);const[ee]=je({controlled:l,default:x,name:"FieldControl",state:"value"}),K=l!==void 0,Q=K?ee:void 0;return Ve({id:W,name:E,commit:g.commit,value:Q,getValue:()=>g.inputRef.current?.value,controlRef:g.inputRef}),xe("input",s,{ref:[r,O],state:Z,props:[{id:W,disabled:k,name:E,ref:g.inputRef,"aria-labelledby":$,autoFocus:m,...K?{value:Q}:{defaultValue:x},onChange(v){const P=v.currentTarget.value;h?.(P,fe(me,v.nativeEvent)),V(P!==N.initialValue),C(P!=="")},onFocus(){y(!0)},onBlur(v){D(!0),y(!1),L==="onBlur"&&g.commit(v.currentTarget.value)},onKeyDown(v){v.currentTarget.tagName==="INPUT"&&v.key==="Enter"&&(D(!0),g.commit(v.currentTarget.value))}},g.getInputValidationProps(),d],stateAttributesMapping:Ne})}),Te=a.forwardRef(function(s,r){return e.jsx(Se,{ref:r,...s})});function Le({className:t,type:s,...r}){return e.jsx(Te,{type:s,"data-slot":"input",className:T("dark:bg-input/30 border-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 disabled:bg-input/50 dark:disabled:bg-input/80 h-8 rounded-lg border bg-transparent px-2.5 py-1 text-base transition-colors file:h-6 file:text-sm file:font-medium focus-visible:ring-[3px] aria-invalid:ring-[3px] md:text-sm file:text-foreground placeholder:text-muted-foreground w-full min-w-0 outline-none file:inline-flex file:border-0 file:bg-transparent disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",t),...r})}const Ge=se(function(){const{user:s}=ae(),r=re(),[n,o]=a.useState(!0),[c,u]=a.useState(!0),[l,f]=a.useState(!1),[h,x]=a.useState(!1),[m,d]=a.useState(!1),[i,b]=a.useState(null),[S,D]=a.useState(!1),[V,N]=a.useState(null),y=async()=>{try{await le({fetchOptions:{onSuccess:()=>{I.success("로그아웃되었습니다"),r("/home")}}})}catch{I.error("로그아웃 중 오류가 발생했습니다")}},C=()=>{I.error("계정이 삭제되었습니다"),x(!1)},L=async()=>{D(!0),N(null),b(null);try{const k=await fetch("/api/wallet/export-private-key"),E=await k.json();if(!k.ok){N(E.message||E.error||"프라이빗 키를 가져오는데 실패했습니다.");return}b(E.privateKey),I.success("프라이빗 키를 불러왔습니다. 안전하게 보관하세요.")}catch(k){N(k.message||"프라이빗 키를 가져오는데 실패했습니다.")}finally{D(!1)}},g=async()=>{if(i)try{await navigator.clipboard.writeText(i),I.success("프라이빗 키가 클립보드에 복사되었습니다.")}catch{I.error("복사에 실패했습니다.")}};return e.jsxs("div",{className:"bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white min-h-screen selection:bg-primary selection:text-white",children:[e.jsxs("div",{className:"relative flex h-full w-full flex-col max-w-md mx-auto overflow-x-hidden min-h-screen pb-20 md:max-w-lg lg:max-w-xl",children:[e.jsxs("header",{className:"sticky top-0 z-50 flex items-center bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md p-4 justify-between border-b border-black/5 dark:border-white/5 transition-colors duration-300",children:[e.jsx("button",{onClick:()=>r(-1),className:"text-slate-900 dark:text-white flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"arrow_back_ios_new"})}),e.jsx("h2",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-10",children:"설정"})]}),e.jsx("div",{className:"p-4 mt-2",children:e.jsxs("div",{className:"flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-4 rounded-2xl shadow-sm dark:shadow-none border border-black/5 dark:border-white/5",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx("div",{className:"bg-center bg-no-repeat bg-cover rounded-full h-16 w-16 ring-2 ring-primary ring-offset-2 ring-offset-background-light dark:ring-offset-background-dark",style:{backgroundImage:`url(${s?.image||"https://lh3.googleusercontent.com/aida-public/AB6AXuCOz-ycctcRpqXk1y01dxqgp0snDjlfF-joCqG0CVQPw5ohSzu3AvTGunT5CJLn6jmmUrArbyvkZSfww_OY_DP6G1W69xzLPTJTsc3r4Cmmd_Y5upAGheZxCFXb-xlEiEMfR-C-lpw_3w8__RfjC2KevhMzQ8yYvdGnQgQpeQO8AoXgoQbbTmgFbxUFXr44lp-xfW1fL6RQTF-TkByk5PyDtvGVJ8H67dkeCltLiiTpvG9jjjrCReyH8mEAkCAm8q3TqLOz2S-vAWk"})`}}),e.jsx("div",{className:"absolute bottom-0 right-0 bg-primary rounded-full p-1 border border-white dark:border-background-dark flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white text-[12px]",children:"edit"})})]}),e.jsxs("div",{className:"flex flex-col justify-center flex-1 min-w-0",children:[e.jsx("p",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight truncate",children:s?.name||"사용자"}),e.jsx("p",{className:"text-primary text-sm font-medium leading-normal truncate",children:s?.id?.includes("-")?"VVIP 팬 멤버십":"Basic Member"})]})]})}),e.jsxs("div",{className:"px-4 pt-2 pb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider px-2 pb-2",children:"앱 설정"}),e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm dark:shadow-none border border-black/5 dark:border-white/5",children:[e.jsx(w,{icon:"notifications",iconBgColor:"bg-orange-400",label:"알림 설정",rightElement:e.jsx(G,{checked:n,onChange:o})}),e.jsx(w,{icon:"dark_mode",iconBgColor:"bg-indigo-500",label:"다크 모드",rightElement:e.jsx(G,{checked:c,onChange:u})}),e.jsx(w,{icon:"chat_bubble",iconBgColor:"bg-green-500",label:"채팅 화면 설정",href:"/settings/chat"})]})]}),e.jsxs("div",{className:"px-4 pt-4 pb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider px-2 pb-2",children:"고급설정 (Advanced)"}),e.jsx("div",{className:"flex flex-col overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm dark:shadow-none border border-black/5 dark:border-white/5",children:e.jsxs(M,{open:m,onOpenChange:d,children:[e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-4 p-4 min-h-14 justify-between border-b border-black/5 dark:border-white/5 last:border-0 hover:bg-black/5 dark:hover:bg-white/5 transition-colors w-full text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-slate-500 flex items-center justify-center rounded-full bg-slate-100 shrink-0 size-8",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex flex-col",children:e.jsx("p",{className:"text-slate-900 dark:text-white text-base font-medium",children:"지갑 키 관리"})})]}),e.jsx("span",{className:"material-symbols-outlined text-slate-400 dark:text-slate-500",children:"chevron_right"})]}),e.jsxs(A,{className:"max-w-md",children:[e.jsxs(B,{children:[e.jsx(_,{children:"지갑 내보내기"}),e.jsx(F,{children:"지갑의 프라이빗 키를 확인하고 내보낼 수 있습니다."})]}),e.jsxs("div",{className:"space-y-4",children:[s?.nearAccountId&&e.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"지갑 주소"}),e.jsx("p",{className:"text-sm font-mono text-slate-900 dark:text-white break-all",children:s.nearAccountId})]}),e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-1",children:"보안 경고"}),e.jsx("p",{className:"text-xs text-red-800 dark:text-red-200",children:"프라이빗 키는 극비 정보입니다. 절대 공유하지 마시고, 안전한 곳에 보관하세요. 누군가 이 키를 알게 되면 지갑의 모든 자산을 제어할 수 있습니다."})]})]})}),!i&&!S&&!V&&e.jsx(j,{onClick:L,className:"w-full",variant:"outline",children:"프라이빗 키 불러오기"}),S&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"프라이빗 키를 불러오는 중..."})}),V&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-1",children:"오류"}),e.jsx("p",{className:"text-xs text-red-800 dark:text-red-200",children:V})]})]})}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"프라이빗 키"}),e.jsxs(j,{onClick:g,size:"sm",variant:"outline",className:"h-7",children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),"복사"]})]}),e.jsx(Le,{type:"text",value:i,readOnly:!0,className:"font-mono text-xs"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"프라이빗 키를 복사하여 안전한 곳에 보관하세요. 다른 지갑으로 자산을 옮기려면 이 키를 사용할 수 있습니다."})]})]}),e.jsx(z,{children:e.jsx(j,{variant:"outline",onClick:()=>{d(!1),b(null),N(null)},children:"닫기"})})]})]})})]}),e.jsxs("div",{className:"px-4 pt-4 pb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider px-2 pb-2",children:"개인정보 및 보안"}),e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm dark:shadow-none border border-black/5 dark:border-white/5",children:[e.jsx(w,{icon:"lock",iconBgColor:"bg-blue-500",label:"개인정보 처리방침",href:"/privacy"}),e.jsx(w,{icon:"block",iconBgColor:"bg-rose-500",label:"차단 관리",href:"/settings/blocked"})]})]}),e.jsxs("div",{className:"px-4 pt-4 pb-2",children:[e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider px-2 pb-2",children:"지원"}),e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm dark:shadow-none border border-black/5 dark:border-white/5",children:[e.jsx(w,{icon:"help",iconBgColor:"bg-slate-500",label:"도움말 / FAQ",href:"/help"}),e.jsx(w,{icon:"info",iconBgColor:"bg-teal-500",label:"오픈소스 라이선스",href:"/license"})]})]}),e.jsxs("div",{className:"px-4 pt-4 pb-8",children:[e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm dark:shadow-none border border-black/5 dark:border-white/5",children:[e.jsxs(M,{open:l,onOpenChange:f,children:[e.jsx("button",{onClick:()=>f(!0),className:"flex items-center gap-4 p-4 min-h-14 justify-between border-b border-black/5 dark:border-white/5 last:border-0 hover:bg-black/5 dark:hover:bg-white/5 transition-colors w-full text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-primary flex items-center justify-center rounded-full bg-primary/10 shrink-0 size-8",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"logout"})}),e.jsx("p",{className:"text-primary text-base font-medium flex-1 truncate",children:"로그아웃"})]})}),e.jsxs(A,{children:[e.jsxs(B,{children:[e.jsx(_,{children:"로그아웃"}),e.jsx(F,{children:"정말 로그아웃하시겠습니까?"})]}),e.jsxs(z,{children:[e.jsx(j,{variant:"outline",onClick:()=>f(!1),children:"취소"}),e.jsx(j,{onClick:y,variant:"destructive",children:"로그아웃"})]})]})]}),e.jsxs(M,{open:h,onOpenChange:x,children:[e.jsx("button",{onClick:()=>x(!0),className:"flex items-center gap-4 p-4 min-h-14 justify-between border-b border-black/5 dark:border-white/5 last:border-0 hover:bg-black/5 dark:hover:bg-white/5 transition-colors w-full text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-slate-400 dark:text-slate-500 flex items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800 shrink-0 size-8",children:e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"person_off"})}),e.jsx("p",{className:"text-red-500 dark:text-red-400 text-base font-medium flex-1 truncate",children:"계정 탈퇴"})]})}),e.jsxs(A,{children:[e.jsxs(B,{children:[e.jsx(_,{children:"계정 삭제"}),e.jsx(F,{children:'계정을 삭제하면 모든 데이터가 영구적으로 삭제되며 복구할 수 없습니다. 탈퇴 전에 대화·기억 데이터를 보관하려면 프로필 또는 채팅 설정에서 "컨텍스트 내보내기"를 이용해 주세요. 정말 계정을 삭제하시겠습니까?'})]}),e.jsxs(z,{children:[e.jsx(j,{variant:"outline",onClick:()=>x(!1),children:"취소"}),e.jsx(j,{onClick:C,variant:"destructive",children:"계정 삭제"})]})]})]})]}),e.jsxs("p",{className:"text-center text-slate-400 dark:text-slate-600 text-xs mt-6",children:["버전 1.2.0 (Build 302)",e.jsx("br",{}),"© 2024 AI Idol Chat Corp."]})]})]}),e.jsx(he,{})]})});export{Ge as default};
