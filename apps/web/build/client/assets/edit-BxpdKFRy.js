import{w as f,a as g,r as d,L as m,F as w}from"./chunk-WWGJGFF6-C0NtPc5H.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{A as j}from"./AdminLayout-Buts2ej8.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./utils-BQHNewu7.js";const P=f(function(){const{notice:t}=g(),s=!t,[i,l]=d.useState(t?.imageUrl||null),[h,p]=d.useState(!1),c=d.useRef(null),u=async a=>{const n=a.target.files?.[0];if(!n)return;const o=new FileReader;o.onloadend=()=>l(o.result),o.readAsDataURL(n),p(!0);const x=new FormData;x.append("file",n);try{const r=await fetch("/api/upload",{method:"POST",body:x});if(!r.ok)throw new Error("Upload failed");const b=await r.json();l(b.url)}catch(r){console.error("Upload error:",r),alert("이미지 업로드에 실패했습니다.")}finally{p(!1)}};return e.jsx(j,{children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{to:"/admin/content/notices",className:"text-primary text-[10px] font-black uppercase tracking-widest flex items-center gap-1 hover:gap-2 transition-all group mb-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"arrow_back"}),"Back to List"]}),e.jsxs("h1",{className:"text-4xl font-black italic tracking-tighter text-white uppercase",children:[s?"Create":"Edit"," ",e.jsx("span",{className:"text-primary",children:"Notice"})]})]}),e.jsxs(w,{method:"post",className:"space-y-8",children:[e.jsxs("div",{className:"bg-[#1A1821] border border-white/5 rounded-[40px] p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest px-1",children:"Classification"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["NOTICE","NEWS","EVENT"].map(a=>e.jsxs("label",{className:"relative",children:[e.jsx("input",{type:"radio",name:"type",value:a,defaultChecked:t?.type===a||s&&a==="NOTICE",className:"peer sr-only"}),e.jsx("div",{className:"p-4 rounded-2xl bg-black/40 border border-white/5 text-center text-[10px] font-black uppercase tracking-widest text-white/20 peer-checked:bg-primary/20 peer-checked:border-primary peer-checked:text-primary transition-all cursor-pointer",children:a})]},a))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest px-1",children:"Headline"}),e.jsx("input",{name:"title",type:"text",defaultValue:t?.title,placeholder:"Enter announcement title...",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-sm font-bold text-white focus:border-primary/50 transition-all",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest px-1",children:"Detailed Content"}),e.jsx("textarea",{name:"content",defaultValue:t?.content,rows:10,placeholder:"Write the full message here...",className:"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-6 text-sm font-medium text-white/80 focus:border-primary/50 transition-all leading-relaxed",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest px-1",children:"Attachment Image"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"file",ref:c,onChange:u,accept:"image/*",className:"hidden"}),e.jsx("input",{type:"hidden",name:"imageUrl",value:i||""}),i?e.jsxs("div",{className:"relative w-full aspect-video rounded-2xl overflow-hidden border border-white/10 bg-black/20 group",children:[e.jsx("img",{src:i,alt:"Preview",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all transform hover:scale-110",children:e.jsx("span",{className:"material-symbols-outlined",children:"edit"})}),e.jsx("button",{type:"button",onClick:()=>l(null),className:"p-3 bg-red-500/20 hover:bg-red-500/40 rounded-full text-red-500 transition-all transform hover:scale-110",children:e.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]}),h&&e.jsx("div",{className:"absolute inset-0 bg-primary/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx("div",{className:"size-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin"})})]}):e.jsxs("button",{type:"button",onClick:()=>c.current?.click(),className:"w-full aspect-video rounded-2xl border-2 border-dashed border-white/5 bg-white/2 hover:bg-white/5 hover:border-primary/30 transition-all flex flex-col items-center justify-center gap-3 group",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white/5 group-hover:bg-primary/20 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors text-3xl",children:"add_photo_alternate"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest",children:"Click to upload image"}),e.jsx("p",{className:"text-[9px] text-white/20 font-bold mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]})]})]}),e.jsxs("div",{className:"flex gap-8 px-1",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",name:"isActive",defaultChecked:t?.isActive??!0,className:"peer sr-only"}),e.jsx("div",{className:"w-10 h-6 bg-white/5 rounded-full border border-white/10 peer-checked:bg-primary/40 peer-checked:border-primary transition-all"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white/20 rounded-full transition-all peer-checked:translate-x-4 peer-checked:bg-white"})]}),e.jsx("span",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest group-hover:text-white transition-colors",children:"Publish Immediately"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",name:"isPinned",defaultChecked:t?.isPinned,className:"peer sr-only"}),e.jsx("div",{className:"w-10 h-6 bg-white/5 rounded-full border border-white/10 peer-checked:bg-primary/40 peer-checked:border-primary transition-all"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white/20 rounded-full transition-all peer-checked:translate-x-4 peer-checked:bg-white"})]}),e.jsx("span",{className:"text-[10px] font-black text-white/40 uppercase tracking-widest group-hover:text-white transition-colors",children:"Pin to Top"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(m,{to:"/admin/content/notices",className:"px-8 py-4 rounded-2xl text-[10px] font-black text-white/40 uppercase tracking-widest hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary text-black px-12 py-4 rounded-2xl font-black italic text-sm hover:scale-105 transition-all shadow-[0_0_30px_rgba(255,0,255,0.4)]",children:s?"PUBLISH NOW":"UPDATE RECORD"})]})]})]})})});export{P as default};
