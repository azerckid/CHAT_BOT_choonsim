import{g as Jr}from"./_commonjsHelpers-DaWZu8wl.js";var Tt;class Kr{constructor(){this._map=new WeakMap,this._idmap=new Map}add(r,...n){const e=n[0];return this._map.set(r,e),e&&typeof e=="object"&&"id"in e&&this._idmap.set(e.id,r),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(r){const n=this._map.get(r);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(r),this}get(r){const n=r._zod.parent;if(n){const e={...this.get(n)??{}};delete e.id;const s={...e,...this._map.get(r)};return Object.keys(s).length?s:void 0}return this._map.get(r)}has(r){return this._map.has(r)}}function Zr(){return new Kr}(Tt=globalThis).__zod_globalRegistry??(Tt.__zod_globalRegistry=Zr());var At=Object.defineProperty,en=(t,r)=>{let n={};for(var e in t)At(n,e,{get:t[e],enumerable:!0});return At(n,Symbol.toStringTag,{value:"Module"}),n};function xt({dataUrl:t,asTypedArray:r=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let e;if(n){e=n[1].toLowerCase();const s=r?Uint8Array.from(atob(n[2]),o=>o.charCodeAt(0)):n[2];return{mime_type:e,data:s}}}var se={exports:{}},Ot;function tn(){if(Ot)return se.exports;Ot=1;const t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,e=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),a=new RegExp(s.source+e.source,"gu"),u=new RegExp("\\d+"+e.source,"gu"),l=(h,d,v)=>{let p=!1,_=!1,I=!1;for(let S=0;S<h.length;S++){const R=h[S];p&&t.test(R)?(h=h.slice(0,S)+"-"+h.slice(S),p=!1,I=_,_=!0,S++):_&&I&&r.test(R)?(h=h.slice(0,S-1)+"-"+h.slice(S-1),I=_,_=!1,p=!0):(p=d(R)===R&&v(R)!==R,I=_,_=v(R)===R&&d(R)!==R)}return h},c=(h,d)=>(n.lastIndex=0,h.replace(n,v=>d(v))),i=(h,d)=>(a.lastIndex=0,u.lastIndex=0,h.replace(a,(v,p)=>d(p)).replace(u,v=>d(v))),f=(h,d)=>{if(!(typeof h=="string"||Array.isArray(h)))throw new TypeError("Expected the input to be `string | string[]`");if(d={pascalCase:!1,preserveConsecutiveUppercase:!1,...d},Array.isArray(h)?h=h.map(I=>I.trim()).filter(I=>I.length).join("-"):h=h.trim(),h.length===0)return"";const v=d.locale===!1?I=>I.toLowerCase():I=>I.toLocaleLowerCase(d.locale),p=d.locale===!1?I=>I.toUpperCase():I=>I.toLocaleUpperCase(d.locale);return h.length===1?d.pascalCase?p(h):v(h):(h!==v(h)&&(h=l(h,v,p)),h=h.replace(o,""),d.preserveConsecutiveUppercase?h=c(h,v):h=v(h),d.pascalCase&&(h=p(h.charAt(0))+h.slice(1)),i(h,p))};return se.exports=f,se.exports.default=f,se.exports}tn();function E(t,r){return T(t)&&t.type===r}function T(t){return typeof t=="object"&&t!==null}function k(t){return Array.isArray(t)}function m(t){return typeof t=="string"}function X(t){return typeof t=="number"}function _t(t){return t instanceof Uint8Array}function $t(t){try{return JSON.parse(t)}catch{return}}const Y=t=>t();function rn(t){if(t.type==="char_location"&&m(t.document_title)&&X(t.start_char_index)&&X(t.end_char_index)&&m(t.cited_text)){const{document_title:r,start_char_index:n,end_char_index:e,cited_text:s,...o}=t;return{...o,type:"citation",source:"char",title:r??void 0,startIndex:n,endIndex:e,citedText:s}}if(t.type==="page_location"&&m(t.document_title)&&X(t.start_page_number)&&X(t.end_page_number)&&m(t.cited_text)){const{document_title:r,start_page_number:n,end_page_number:e,cited_text:s,...o}=t;return{...o,type:"citation",source:"page",title:r??void 0,startIndex:n,endIndex:e,citedText:s}}if(t.type==="content_block_location"&&m(t.document_title)&&X(t.start_block_index)&&X(t.end_block_index)&&m(t.cited_text)){const{document_title:r,start_block_index:n,end_block_index:e,cited_text:s,...o}=t;return{...o,type:"citation",source:"block",title:r??void 0,startIndex:n,endIndex:e,citedText:s}}if(t.type==="web_search_result_location"&&m(t.url)&&m(t.title)&&m(t.encrypted_index)&&m(t.cited_text)){const{url:r,title:n,encrypted_index:e,cited_text:s,...o}=t;return{...o,type:"citation",source:"url",url:r,title:n,startIndex:Number(e),endIndex:Number(e),citedText:s}}if(t.type==="search_result_location"&&m(t.source)&&m(t.title)&&X(t.start_block_index)&&X(t.end_block_index)&&m(t.cited_text)){const{source:r,title:n,start_block_index:e,end_block_index:s,cited_text:o,...a}=t;return{...a,type:"citation",source:"search",url:r,title:n??void 0,startIndex:e,endIndex:s,citedText:o}}}function nn(t){if(E(t,"document")&&T(t.source)&&"type"in t.source){if(t.source.type==="base64"&&m(t.source.media_type)&&m(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&m(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&m(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&m(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(E(t,"image")&&T(t.source)&&"type"in t.source){if(t.source.type==="base64"&&m(t.source.media_type)&&m(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&m(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&m(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function Lt(t){function*r(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const e of n){if(E(e,"text")&&m(e.text)){const{text:s,citations:o,...a}=e;if(k(o)&&o.length){const u=o.reduce((l,c)=>{const i=rn(c);return i?[...l,i]:l},[]);yield{...a,type:"text",text:s,annotations:u};continue}else{yield{...a,type:"text",text:s};continue}}else if(E(e,"thinking")&&m(e.thinking)){const{thinking:s,signature:o,...a}=e;yield{...a,type:"reasoning",reasoning:s,signature:o};continue}else if(E(e,"redacted_thinking")){yield{type:"non_standard",value:e};continue}else if(E(e,"tool_use")&&m(e.name)&&m(e.id)){yield{type:"tool_call",id:e.id,name:e.name,args:e.input};continue}else if(E(e,"input_json_delta")){if(on(t)&&t.tool_call_chunks?.length){const s=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:s.id,name:s.name,args:s.args,index:s.index};continue}}else if(E(e,"server_tool_use")&&m(e.name)&&m(e.id)){const{name:s,id:o}=e;if(s==="web_search"){yield{id:o,type:"server_tool_call",name:"web_search",args:{query:Y(()=>{if(typeof e.input=="string")return e.input;if(T(e.input)&&m(e.input.query))return e.input.query;if(m(e.partial_json)){const a=$t(e.partial_json);if(a?.query)return a.query}return""})}};continue}else if(e.name==="code_execution"){yield{id:o,type:"server_tool_call",name:"code_execution",args:{code:Y(()=>{if(typeof e.input=="string")return e.input;if(T(e.input)&&m(e.input.code))return e.input.code;if(m(e.partial_json)){const a=$t(e.partial_json);if(a?.code)return a.code}return""})}};continue}}else if(E(e,"web_search_tool_result")&&m(e.tool_use_id)&&k(e.content)){const{content:s,tool_use_id:o}=e;yield{type:"server_tool_call_result",name:"web_search",toolCallId:o,status:"success",output:{urls:s.reduce((a,u)=>E(u,"web_search_result")?[...a,u.url]:a,[])}};continue}else if(E(e,"code_execution_tool_result")&&m(e.tool_use_id)&&T(e.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:e.tool_use_id,status:"success",output:e.content};continue}else if(E(e,"mcp_tool_use")){yield{id:e.id,type:"server_tool_call",name:"mcp_tool_use",args:e.input};continue}else if(E(e,"mcp_tool_result")&&m(e.tool_use_id)&&T(e.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:e.tool_use_id,status:"success",output:e.content};continue}else if(E(e,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:e.input};continue}else if(E(e,"search_result")){yield{id:e.id,type:"non_standard",value:e};continue}else if(E(e,"tool_result")){yield{id:e.id,type:"non_standard",value:e};continue}else{const s=nn(e);if(s){yield s;continue}}yield{type:"non_standard",value:e}}}return Array.from(r())}const sn={translateContent:Lt,translateContentChunk:Lt};function on(t){return typeof t?._getType=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function an(t){return!!(E(t,"image_url")&&T(t.image_url)||E(t,"input_audio")&&T(t.input_audio)||E(t,"file")&&T(t.file))}function un(t){if(E(t,"image_url")&&T(t.image_url)&&m(t.image_url.url)){const r=xt({dataUrl:t.image_url.url});return r?{type:"image",mimeType:r.mime_type,data:r.data}:{type:"image",url:t.image_url.url}}else{if(E(t,"input_audio")&&T(t.input_audio)&&m(t.input_audio.data)&&m(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(E(t,"file")&&T(t.file)&&m(t.file.data)){const r=xt({dataUrl:t.file.data});if(r)return{type:"file",data:r.data,mimeType:r.mime_type};if(m(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function ln(t){const r=[];typeof t.content=="string"?t.content.length>0&&r.push({type:"text",text:t.content}):r.push(...Ur(t.content));for(const n of t.tool_calls??[])r.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return r}function cn(t){const r=[];typeof t.content=="string"?t.content.length>0&&r.push({type:"text",text:t.content}):r.push(...Ur(t.content));for(const n of t.tool_calls??[])r.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return r}function Ur(t){const r=[];for(const n of t)an(n)?r.push(un(n)):r.push(n);return r}function fn(t){if(t.type==="url_citation"){const{url:r,title:n,start_index:e,end_index:s}=t;return{type:"citation",url:r,title:n,startIndex:e,endIndex:s}}if(t.type==="file_citation"){const{file_id:r,filename:n,index:e}=t;return{type:"citation",title:n,startIndex:e,endIndex:e,fileId:r}}return t}function Gr(t){function*r(){T(t.additional_kwargs?.reasoning)&&k(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((e,s)=>T(s)&&m(s.text)?`${e}${s.text}`:e,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const e of n)if(E(e,"text")){const{text:s,annotations:o,...a}=e;Array.isArray(o)?yield{...a,type:"text",text:String(s),annotations:o.map(fn)}:yield{...a,type:"text",text:String(s)}}for(const e of t.tool_calls??[])yield{type:"tool_call",id:e.id,name:e.name,args:e.args};if(T(t.additional_kwargs)&&k(t.additional_kwargs.tool_outputs))for(const e of t.additional_kwargs.tool_outputs){if(E(e,"web_search_call")){const s={};if(T(e.action)&&m(e.action.query)&&(s.query=e.action.query),yield{id:e.id,type:"server_tool_call",name:"web_search",args:s},e.status==="completed"||e.status==="failed"){const o={};T(e.action)&&(o.action=e.action),yield{type:"server_tool_call_result",toolCallId:m(e.id)?e.id:"",status:e.status==="completed"?"success":"error",output:o}}continue}else if(E(e,"file_search_call")){yield{id:e.id,type:"server_tool_call",name:"file_search",args:{queries:k(e.queries)?e.queries:[]}},(e.status==="completed"||e.status==="failed")&&(yield{type:"server_tool_call_result",toolCallId:m(e.id)?e.id:"",status:e.status==="completed"?"success":"error",output:k(e.results)?{results:e.results}:{}});continue}else if(E(e,"computer_call")){yield{type:"non_standard",value:e};continue}else if(E(e,"code_interpreter_call")){if(m(e.code)&&(yield{id:e.id,type:"server_tool_call",name:"code_interpreter",args:{code:e.code}}),k(e.outputs)){const s=Y(()=>{if(e.status!=="in_progress"){if(e.status==="completed")return 0;if(e.status==="incomplete")return 127;if(e.status!=="interpreting"&&e.status==="failed")return 1}});for(const o of e.outputs)if(E(o,"logs")){yield{type:"server_tool_call_result",toolCallId:e.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:s??0,stderr:[0,void 0].includes(s)?void 0:String(o.logs),stdout:[0,void 0].includes(s)?String(o.logs):void 0}};continue}}continue}else if(E(e,"mcp_call")){yield{id:e.id,type:"server_tool_call",name:"mcp_call",args:e.input};continue}else if(E(e,"mcp_list_tools")){yield{id:e.id,type:"server_tool_call",name:"mcp_list_tools",args:e.input};continue}else if(E(e,"mcp_approval_request")){yield{type:"non_standard",value:e};continue}else if(E(e,"image_generation_call")){m(e.result)&&(yield{type:"image",mimeType:"image/png",data:e.result,id:m(e.id)?e.id:void 0,metadata:{status:m(e.status)?e.status:void 0}}),yield{type:"non_standard",value:e};continue}T(e)&&(yield{type:"non_standard",value:e})}}return Array.from(r())}function hn(t){function*r(){yield*Gr(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(r())}const dn={translateContent:t=>typeof t.content=="string"?ln(t):Gr(t),translateContentChunk:t=>typeof t.content=="string"?cn(t):hn(t)};function yt(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function pn(t){if(T(t.document)&&T(t.document.source)){const r=yt(T(t.document)&&m(t.document.format)?t.document.format:"");if(T(t.document.source)){if(T(t.document.source.s3Location)&&m(t.document.source.s3Location.uri))return{type:"file",mimeType:r,fileId:t.document.source.s3Location.uri};if(_t(t.document.source.bytes))return{type:"file",mimeType:r,data:t.document.source.bytes};if(m(t.document.source.text))return{type:"file",mimeType:r,data:Buffer.from(t.document.source.text).toString("base64")};if(k(t.document.source.content))return{type:"file",mimeType:r,data:t.document.source.content.reduce((n,e)=>T(e)&&m(e.text)?n+e.text:n,"")}}}return{type:"non_standard",value:t}}function mn(t){if(E(t,"image")&&T(t.image)){const r=yt(T(t.image)&&m(t.image.format)?t.image.format:"");if(T(t.image.source)){if(T(t.image.source.s3Location)&&m(t.image.source.s3Location.uri))return{type:"image",mimeType:r,fileId:t.image.source.s3Location.uri};if(_t(t.image.source.bytes))return{type:"image",mimeType:r,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function _n(t){if(E(t,"video")&&T(t.video)){const r=yt(T(t.video)&&m(t.video.format)?t.video.format:"");if(T(t.video.source)){if(T(t.video.source.s3Location)&&m(t.video.source.s3Location.uri))return{type:"video",mimeType:r,fileId:t.video.source.s3Location.uri};if(_t(t.video.source.bytes))return{type:"video",mimeType:r,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function St(t){function*r(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const e of n){if(E(e,"cache_point")){yield{type:"non_standard",value:e};continue}else if(E(e,"citations_content")&&T(e.citationsContent)){yield{type:"text",text:k(e.citationsContent.content)?e.citationsContent.content.reduce((s,o)=>T(o)&&m(o.text)?s+o.text:s,""):"",annotations:k(e.citationsContent.citations)?e.citationsContent.citations.reduce((s,o)=>{if(T(o)){const a=k(o.sourceContent)?o.sourceContent.reduce((l,c)=>T(c)&&m(c.text)?l+c.text:l,""):"",u=Y(()=>{if(T(o.location)){const l=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(T(l))return{source:X(l.documentIndex)?l.documentIndex.toString():void 0,startIndex:X(l.start)?l.start:void 0,endIndex:X(l.end)?l.end:void 0}}return{}});s.push({type:"citation",citedText:a,...u})}return s},[]):[]};continue}else if(E(e,"document")&&T(e.document)){yield pn(e);continue}else if(E(e,"guard_content")){yield{type:"non_standard",value:e};continue}else if(E(e,"image")&&T(e.image)){yield mn(e);continue}else if(E(e,"reasoning_content")&&m(e.reasoningText)){yield{type:"reasoning",reasoning:e.reasoningText};continue}else if(E(e,"text")&&m(e.text)){yield{type:"text",text:e.text};continue}else if(E(e,"tool_result")){yield{type:"non_standard",value:e};continue}else{if(E(e,"tool_call"))continue;if(E(e,"video")&&T(e.video)){yield _n(e);continue}}yield{type:"non_standard",value:e}}}return Array.from(r())}const yn={translateContent:St,translateContentChunk:St};function Nt(t){const r=[],n=t.additional_kwargs?.reasoning_content;if(m(n)&&n.length>0&&r.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&r.push({type:"text",text:t.content});else for(const e of t.content)typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&m(e.text)&&r.push({type:"text",text:e.text});for(const e of t.tool_calls??[])r.push({type:"tool_call",id:e.id,name:e.name,args:e.args});return r}const vn={translateContent:Nt,translateContentChunk:Nt};function Pt(t){function*r(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const e of n){if(E(e,"text")&&m(e.text)){yield{type:"text",text:e.text};continue}else if(E(e,"thinking")&&m(e.thinking)){yield{type:"reasoning",reasoning:e.thinking,...e.signature?{signature:e.signature}:{}};continue}else if(E(e,"inlineData")&&T(e.inlineData)&&m(e.inlineData.mimeType)&&m(e.inlineData.data)){yield{type:"file",mimeType:e.inlineData.mimeType,data:e.inlineData.data};continue}else if(E(e,"functionCall")&&T(e.functionCall)&&m(e.functionCall.name)&&T(e.functionCall.args)){yield{type:"tool_call",id:t.id,name:e.functionCall.name,args:e.functionCall.args};continue}else if(E(e,"functionResponse")){yield{type:"non_standard",value:e};continue}else if(E(e,"fileData")&&T(e.fileData)&&m(e.fileData.mimeType)&&m(e.fileData.fileUri)){yield{type:"file",mimeType:e.fileData.mimeType,fileId:e.fileData.fileUri};continue}else if(E(e,"executableCode")){yield{type:"non_standard",value:e};continue}else if(E(e,"codeExecutionResult")){yield{type:"non_standard",value:e};continue}yield{type:"non_standard",value:e}}}return Array.from(r())}const gn={translateContent:Pt,translateContentChunk:Pt};function bt(t){function*r(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const e of n){if(E(e,"reasoning")&&m(e.reasoning)){const s=Y(()=>{const o=n.indexOf(e);if(k(t.additional_kwargs?.signatures)&&o>=0)return t.additional_kwargs.signatures.at(o)});m(s)?yield{type:"reasoning",reasoning:e.reasoning,signature:s}:yield{type:"reasoning",reasoning:e.reasoning};continue}else if(E(e,"thinking")&&m(e.thinking)){yield{type:"reasoning",reasoning:e.thinking,...e.signature?{signature:e.signature}:{}};continue}else if(E(e,"text")&&m(e.text)){yield{type:"text",text:e.text};continue}else if(E(e,"image_url")){if(m(e.image_url))if(e.image_url.startsWith("data:")){const s=e.image_url.match(/^data:([^;]+);base64,(.+)$/);s?yield{type:"image",data:s[2],mimeType:s[1]}:yield{type:"image",url:e.image_url}}else yield{type:"image",url:e.image_url};continue}else if(E(e,"media")&&m(e.mimeType)&&m(e.data)){yield{type:"file",mimeType:e.mimeType,data:e.data};continue}yield{type:"non_standard",value:e}}}return Array.from(r())}const En={translateContent:bt,translateContentChunk:bt};function qt(t){const r=[],n=t.additional_kwargs?.reasoning;if(m(n)&&n.length>0&&r.push({type:"reasoning",reasoning:n}),typeof t.content=="string"){let e=t.content;const s=e.match(/<think>([\s\S]*?)<\/think>/);if(s){const o=s[1].trim();o.length>0&&r.push({type:"reasoning",reasoning:o}),e=e.replace(/<think>[\s\S]*?<\/think>/,"").trim()}e.length>0&&r.push({type:"text",text:e})}else for(const e of t.content)if(typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&m(e.text)){let s=e.text;const o=s.match(/<think>([\s\S]*?)<\/think>/);if(o){const a=o[1].trim();a.length>0&&r.push({type:"reasoning",reasoning:a}),s=s.replace(/<think>[\s\S]*?<\/think>/,"").trim()}s.length>0&&r.push({type:"text",text:s})}for(const e of t.tool_calls??[])r.push({type:"tool_call",id:e.id,name:e.name,args:e.args});return r}const Rn={translateContent:qt,translateContentChunk:qt};function Dt(t){const r=[],n=t.additional_kwargs?.reasoning_content;if(m(n)&&n.length>0&&r.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&r.push({type:"text",text:t.content});else for(const e of t.content)typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&m(e.text)&&r.push({type:"text",text:e.text});for(const e of t.tool_calls??[])r.push({type:"tool_call",id:e.id,name:e.name,args:e.args});return r}const In={translateContent:Dt,translateContentChunk:Dt};function Ft(t){const r=[];if(T(t.additional_kwargs?.reasoning)){const e=t.additional_kwargs.reasoning;if(k(e.summary)){const s=e.summary.reduce((o,a)=>T(a)&&m(a.text)?`${o}${a.text}`:o,"");s.length>0&&r.push({type:"reasoning",reasoning:s})}}const n=t.additional_kwargs?.reasoning_content;if(m(n)&&n.length>0&&r.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&r.push({type:"text",text:t.content});else for(const e of t.content)typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&m(e.text)&&r.push({type:"text",text:e.text});for(const e of t.tool_calls??[])r.push({type:"tool_call",id:e.id,name:e.name,args:e.args});return r}const wn={translateContent:Ft,translateContentChunk:Ft};function jt(t){function*r(){const n=Y(()=>typeof t.content=="string"?t.additional_kwargs.originalTextContentBlock?[{...t.additional_kwargs.originalTextContentBlock,type:"text"}]:[{type:"text",text:t.content}]:t.content);for(const e of n){const s=Y(()=>E(e,"text")&&m(e.text)?{type:"text",text:e.text}:E(e,"inlineData")&&T(e.inlineData)&&m(e.inlineData.mimeType)&&m(e.inlineData.data)?{type:"file",mimeType:e.inlineData.mimeType,data:e.inlineData.data}:E(e,"functionCall")&&T(e.functionCall)&&m(e.functionCall.name)&&T(e.functionCall.args)?{type:"tool_call",id:t.id,name:e.functionCall.name,args:e.functionCall.args}:E(e,"functionResponse")?{type:"non_standard",value:e}:E(e,"fileData")&&T(e.fileData)&&m(e.fileData.mimeType)&&m(e.fileData.fileUri)?{type:"file",mimeType:e.fileData.mimeType,fileId:e.fileData.fileUri}:E(e,"executableCode")?{type:"non_standard",value:e}:E(e,"codeExecutionResult")?{type:"non_standard",value:e}:{type:"non_standard",value:e}),o=Y(()=>"thought"in e&&e.thought?{type:"reasoning",reasoning:s.type==="text"?s.text:"",reasoningContentBlock:s}:s),a={thought:e.thought,thoughtSignature:e.thoughtSignature,partMetadata:e.partMetadata,...o};for(const u in a)a[u]===void 0&&delete a[u];yield a}}return Array.from(r())}const Cn={translateContent:jt,translateContentChunk:jt};globalThis.lc_block_translators_registry??=new Map([["anthropic",sn],["bedrock-converse",yn],["deepseek",vn],["google",Cn],["google-genai",gn],["google-vertexai",En],["groq",Rn],["ollama",In],["openai",dn],["xai",wn]]);function Mr(t){const r=Symbol.for(t);return{brand(n,e){const s=e?Symbol.for(`${t}.${e}`):r;class o extends n{[s]=!0;constructor(...u){super(...u)}static isInstance(u){return typeof u=="object"&&u!==null&&s in u&&u[s]===!0}}return Object.defineProperty(o,"name",{value:n.name}),o},sub(n){return Mr(`${t}.${n}`)},isInstance(n){return typeof n=="object"&&n!==null&&r in n&&n[r]===!0}}}const Tn=Mr("langchain"),vt=Tn.sub("error");var Vr=class extends vt.brand(Error){name="LangChainError";constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}};(class extends vt.brand(Vr,"model-abort"){name="ModelAbortError";partialOutput;constructor(t,r){super(t),this.partialOutput=r}});(class kr extends vt.brand(Vr,"context-overflow"){name="ContextOverflowError";cause;constructor(r){super(r??"Input exceeded the model's context window.")}static fromError(r){const n=new kr(r.message);return n.cause=r,n}});const U=t=>BigInt(t);U("0x9E3779B1");U("0x85EBCA77");U("0xC2B2AE3D");U("0x9E3779B185EBCA87");U("0xC2B2AE3D27D4EB4F");U("0x165667B19E3779F9");U("0x85EBCA77C2B2AE63");U("0x27D4EB2F165667C5");U("0x165667919E3779F9");U("0x9FB21C651E98DF25");function An(t){const r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)r[n/2]=parseInt(t.substring(n,n+2),16);return r}An("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e");(U(1)<<U(128))-U(1);(U(1)<<U(64))-U(1);(U(1)<<U(32))-U(1);new TextEncoder;function xn(t,r){throw new Error("dump() is not supported in browser environments.")}function On(t){throw new Error("load() is not supported in browser environments.")}function $n(t,r){return r===null?!1:Date.now()-t.createdAt>r*1e3}class Ln{constructor(r={}){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ttlSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshIntervalSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_metrics",{enumerable:!0,configurable:!0,writable:!0,value:{hits:0,misses:0,refreshes:0,refreshErrors:0}}),this.configure(r)}get metrics(){return{...this._metrics}}get totalRequests(){return this._metrics.hits+this._metrics.misses}get hitRate(){const r=this.totalRequests;return r>0?this._metrics.hits/r:0}resetMetrics(){this._metrics={hits:0,misses:0,refreshes:0,refreshErrors:0}}get(r,n){if(this.maxSize===0)return;const e=this.cache.get(r);if(!e){this._metrics.misses+=1;return}return this.cache.delete(r),this.cache.set(r,{...e,refreshFunc:n}),this._metrics.hits+=1,e.value}set(r,n,e){if(this.maxSize===0)return;if(this.refreshTimer===void 0&&this.startRefreshLoop(),!this.cache.has(r)&&this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;o!==void 0&&this.cache.delete(o)}const s={value:n,createdAt:Date.now(),refreshFunc:e};this.cache.delete(r),this.cache.set(r,s)}invalidate(r){this.cache.delete(r)}clear(){this.cache.clear()}get size(){return this.cache.size}stop(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=void 0)}dump(r){for(const[n,e]of this.cache.entries())e.value;xn()}load(r){const n=On();if(!n)return 0;let e=0;const s=Date.now();for(const[o,a]of Object.entries(n)){if(this.cache.size>=this.maxSize)break;const u={value:a,createdAt:s};this.cache.set(o,u),e+=1}return e}startRefreshLoop(){this.stop(),this.ttlSeconds!==null&&(this.refreshTimer=setInterval(()=>{this.refreshStaleEntries().catch(r=>{console.warn("Unexpected error in cache refresh loop:",r)})},this.refreshIntervalSeconds*1e3),this.refreshTimer.unref&&this.refreshTimer.unref())}getStaleEntries(){const r=[];for(const[n,e]of this.cache.entries())$n(e,this.ttlSeconds)&&r.push([n,e]);return r}async refreshStaleEntries(){const r=this.getStaleEntries();if(r.length!==0){for(const[n,e]of r)if(e.refreshFunc!==void 0)try{const s=await e.refreshFunc();this.set(n,s,e.refreshFunc),this._metrics.refreshes+=1}catch(s){this._metrics.refreshErrors+=1,console.warn(`Failed to refresh cache entry ${n}:`,s)}}}configure(r){this.stop(),this.refreshIntervalSeconds=r.refreshIntervalSeconds??60,this.maxSize=r.maxSize??100,this.ttlSeconds=r.ttlSeconds??300}}new Ln;var ie={},Ee={exports:{}},Bt;function Sn(){return Bt||(Bt=1,(function(t){var r=Object.prototype.hasOwnProperty,n="~";function e(){}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(n=!1));function s(l,c,i){this.fn=l,this.context=c,this.once=i||!1}function o(l,c,i,f,h){if(typeof i!="function")throw new TypeError("The listener must be a function");var d=new s(i,f||l,h),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],d]:l._events[v].push(d):(l._events[v]=d,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new e:delete l._events[c]}function u(){this._events=new e,this._eventsCount=0}u.prototype.eventNames=function(){var c=[],i,f;if(this._eventsCount===0)return c;for(f in i=this._events)r.call(i,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(i)):c},u.prototype.listeners=function(c){var i=n?n+c:c,f=this._events[i];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,v=new Array(d);h<d;h++)v[h]=f[h].fn;return v},u.prototype.listenerCount=function(c){var i=n?n+c:c,f=this._events[i];return f?f.fn?1:f.length:0},u.prototype.emit=function(c,i,f,h,d,v){var p=n?n+c:c;if(!this._events[p])return!1;var _=this._events[p],I=arguments.length,S,R;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),I){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,i),!0;case 3:return _.fn.call(_.context,i,f),!0;case 4:return _.fn.call(_.context,i,f,h),!0;case 5:return _.fn.call(_.context,i,f,h,d),!0;case 6:return _.fn.call(_.context,i,f,h,d,v),!0}for(R=1,S=new Array(I-1);R<I;R++)S[R-1]=arguments[R];_.fn.apply(_.context,S)}else{var G=_.length,F;for(R=0;R<G;R++)switch(_[R].once&&this.removeListener(c,_[R].fn,void 0,!0),I){case 1:_[R].fn.call(_[R].context);break;case 2:_[R].fn.call(_[R].context,i);break;case 3:_[R].fn.call(_[R].context,i,f);break;case 4:_[R].fn.call(_[R].context,i,f,h);break;default:if(!S)for(F=1,S=new Array(I-1);F<I;F++)S[F-1]=arguments[F];_[R].fn.apply(_[R].context,S)}}return!0},u.prototype.on=function(c,i,f){return o(this,c,i,f,!1)},u.prototype.once=function(c,i,f){return o(this,c,i,f,!0)},u.prototype.removeListener=function(c,i,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!i)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===i&&(!h||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var p=0,_=[],I=v.length;p<I;p++)(v[p].fn!==i||h&&!v[p].once||f&&v[p].context!==f)&&_.push(v[p]);_.length?this._events[d]=_.length===1?_[0]:_:a(this,d)}return this},u.prototype.removeAllListeners=function(c){var i;return c?(i=n?n+c:c,this._events[i]&&a(this,i)):(this._events=new e,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(Ee)),Ee.exports}var te={exports:{}},Re,Ut;function Nn(){return Ut||(Ut=1,Re=(t,r)=>(r=r||(()=>{}),t.then(n=>new Promise(e=>{e(r())}).then(()=>n),n=>new Promise(e=>{e(r())}).then(()=>{throw n})))),Re}var Gt;function Pn(){if(Gt)return te.exports;Gt=1;const t=Nn();class r extends Error{constructor(s){super(s),this.name="TimeoutError"}}const n=(e,s,o)=>new Promise((a,u)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){a(e);return}const l=setTimeout(()=>{if(typeof o=="function"){try{a(o())}catch(f){u(f)}return}const c=typeof o=="string"?o:`Promise timed out after ${s} milliseconds`,i=o instanceof Error?o:new r(c);typeof e.cancel=="function"&&e.cancel(),u(i)},s);t(e.then(a,u),()=>{clearTimeout(l)})});return te.exports=n,te.exports.default=n,te.exports.TimeoutError=r,te.exports}var oe={},ae={},Mt;function bn(){if(Mt)return ae;Mt=1,Object.defineProperty(ae,"__esModule",{value:!0});function t(r,n,e){let s=0,o=r.length;for(;o>0;){const a=o/2|0;let u=s+a;e(r[u],n)<=0?(s=++u,o-=a+1):o=a}return s}return ae.default=t,ae}var Vt;function qn(){if(Vt)return oe;Vt=1,Object.defineProperty(oe,"__esModule",{value:!0});const t=bn();class r{constructor(){this._queue=[]}enqueue(e,s){s=Object.assign({priority:0},s);const o={priority:s.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(o);return}const a=t.default(this._queue,o,(u,l)=>l.priority-u.priority);this._queue.splice(a,0,o)}dequeue(){const e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(s=>s.priority===e.priority).map(s=>s.run)}get size(){return this._queue.length}}return oe.default=r,oe}var kt;function Dn(){if(kt)return ie;kt=1,Object.defineProperty(ie,"__esModule",{value:!0});const t=Sn(),r=Pn(),n=qn(),e=()=>{},s=new r.TimeoutError;class o extends t{constructor(u){var l,c,i,f;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=e,this._resolveIdle=e,u=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},u),!(typeof u.intervalCap=="number"&&u.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(c=(l=u.intervalCap)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""}\` (${typeof u.intervalCap})`);if(u.interval===void 0||!(Number.isFinite(u.interval)&&u.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(f=(i=u.interval)===null||i===void 0?void 0:i.toString())!==null&&f!==void 0?f:""}\` (${typeof u.interval})`);this._carryoverConcurrencyCount=u.carryoverConcurrencyCount,this._isIntervalIgnored=u.intervalCap===1/0||u.interval===0,this._intervalCap=u.intervalCap,this._interval=u.interval,this._queue=new u.queueClass,this._queueClass=u.queueClass,this.concurrency=u.concurrency,this._timeout=u.timeout,this._throwOnTimeout=u.throwOnTimeout===!0,this._isPaused=u.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=e,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=e,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const u=Date.now();if(this._intervalId===void 0){const l=this._intervalEnd-u;if(l<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},l)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const u=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const l=this._queue.dequeue();return l?(this.emit("active"),l(),u&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(u){if(!(typeof u=="number"&&u>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${u}\` (${typeof u})`);this._concurrency=u,this._processQueue()}async add(u,l={}){return new Promise((c,i)=>{const f=async()=>{this._pendingCount++,this._intervalCount++;try{const h=this._timeout===void 0&&l.timeout===void 0?u():r.default(Promise.resolve(u()),l.timeout===void 0?this._timeout:l.timeout,()=>{(l.throwOnTimeout===void 0?this._throwOnTimeout:l.throwOnTimeout)&&i(s)});c(await h)}catch(h){i(h)}this._next()};this._queue.enqueue(f,l),this._tryToStartAnother(),this.emit("add")})}async addAll(u,l){return Promise.all(u.map(async c=>this.add(c,l)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(u=>{const l=this._resolveEmpty;this._resolveEmpty=()=>{l(),u()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(u=>{const l=this._resolveIdle;this._resolveIdle=()=>{l(),u()}})}get size(){return this._queue.size}sizeBy(u){return this._queue.filter(u).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(u){this._timeout=u}}return ie.default=o,ie}var Fn=Dn();const Ie=Jr(Fn);"default"in Ie&&Ie.default;var ue={exports:{}},we,Xt;function fe(){if(Xt)return we;Xt=1;const t="2.0.0",r=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,e=16,s=r-6;return we={MAX_LENGTH:r,MAX_SAFE_COMPONENT_LENGTH:e,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},we}var Ce,zt;function he(){if(zt)return Ce;zt=1;var t={};return Ce=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Ce}var Ht;function ne(){return Ht||(Ht=1,(function(t,r){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:e,MAX_LENGTH:s}=fe(),o=he();r=t.exports={};const a=r.re=[],u=r.safeRe=[],l=r.src=[],c=r.safeSrc=[],i=r.t={};let f=0;const h="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",s],[h,e]],v=_=>{for(const[I,S]of d)_=_.split(`${I}*`).join(`${I}{0,${S}}`).split(`${I}+`).join(`${I}{1,${S}}`);return _},p=(_,I,S)=>{const R=v(I),G=f++;o(_,G,I),i[_]=G,l[G]=I,c[G]=R,a[G]=new RegExp(I,S?"g":void 0),u[G]=new RegExp(R,S?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${l[i.NUMERICIDENTIFIER]})\\.(${l[i.NUMERICIDENTIFIER]})\\.(${l[i.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[i.NUMERICIDENTIFIERLOOSE]})\\.(${l[i.NUMERICIDENTIFIERLOOSE]})\\.(${l[i.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[i.NONNUMERICIDENTIFIER]}|${l[i.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[i.NONNUMERICIDENTIFIER]}|${l[i.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${l[i.PRERELEASEIDENTIFIER]}(?:\\.${l[i.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[i.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${l[i.BUILDIDENTIFIER]}(?:\\.${l[i.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[i.MAINVERSION]}${l[i.PRERELEASE]}?${l[i.BUILD]}?`),p("FULL",`^${l[i.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[i.MAINVERSIONLOOSE]}${l[i.PRERELEASELOOSE]}?${l[i.BUILD]}?`),p("LOOSE",`^${l[i.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[i.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[i.XRANGEIDENTIFIER]})(?:\\.(${l[i.XRANGEIDENTIFIER]})(?:\\.(${l[i.XRANGEIDENTIFIER]})(?:${l[i.PRERELEASE]})?${l[i.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[i.XRANGEIDENTIFIERLOOSE]})(?:${l[i.PRERELEASELOOSE]})?${l[i.BUILD]}?)?)?`),p("XRANGE",`^${l[i.GTLT]}\\s*${l[i.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[i.GTLT]}\\s*${l[i.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[i.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[i.COERCEPLAIN]+`(?:${l[i.PRERELEASE]})?(?:${l[i.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[i.COERCE],!0),p("COERCERTLFULL",l[i.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[i.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",p("TILDE",`^${l[i.LONETILDE]}${l[i.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[i.LONETILDE]}${l[i.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[i.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",p("CARET",`^${l[i.LONECARET]}${l[i.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[i.LONECARET]}${l[i.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[i.GTLT]}\\s*(${l[i.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[i.GTLT]}\\s*(${l[i.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[i.GTLT]}\\s*(${l[i.LOOSEPLAIN]}|${l[i.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[i.XRANGEPLAIN]})\\s+-\\s+(${l[i.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[i.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ue,ue.exports)),ue.exports}var Te,Yt;function gt(){if(Yt)return Te;Yt=1;const t=Object.freeze({loose:!0}),r=Object.freeze({});return Te=e=>e?typeof e!="object"?t:e:r,Te}var Ae,Wt;function Xr(){if(Wt)return Ae;Wt=1;const t=/^[0-9]+$/,r=(e,s)=>{if(typeof e=="number"&&typeof s=="number")return e===s?0:e<s?-1:1;const o=t.test(e),a=t.test(s);return o&&a&&(e=+e,s=+s),e===s?0:o&&!a?-1:a&&!o?1:e<s?-1:1};return Ae={compareIdentifiers:r,rcompareIdentifiers:(e,s)=>r(s,e)},Ae}var xe,Qt;function V(){if(Qt)return xe;Qt=1;const t=he(),{MAX_LENGTH:r,MAX_SAFE_INTEGER:n}=fe(),{safeRe:e,t:s}=ne(),o=gt(),{compareIdentifiers:a}=Xr();class u{constructor(c,i){if(i=o(i),c instanceof u){if(c.loose===!!i.loose&&c.includePrerelease===!!i.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>r)throw new TypeError(`version is longer than ${r} characters`);t("SemVer",c,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const f=c.trim().match(i.loose?e[s.LOOSE]:e[s.FULL]);if(!f)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const d=+h;if(d>=0&&d<n)return d}return h}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(t("SemVer.compare",this.version,this.options,c),!(c instanceof u)){if(typeof c=="string"&&c===this.version)return 0;c=new u(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof u||(c=new u(c,this.options)),this.major<c.major?-1:this.major>c.major?1:this.minor<c.minor?-1:this.minor>c.minor?1:this.patch<c.patch?-1:this.patch>c.patch?1:0}comparePre(c){if(c instanceof u||(c=new u(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let i=0;do{const f=this.prerelease[i],h=c.prerelease[i];if(t("prerelease compare",i,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return a(f,h)}while(++i)}compareBuild(c){c instanceof u||(c=new u(c,this.options));let i=0;do{const f=this.build[i],h=c.build[i];if(t("build compare",i,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return a(f,h)}while(++i)}inc(c,i,f){if(c.startsWith("pre")){if(!i&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(i){const h=`-${i}`.match(this.options.loose?e[s.PRERELEASELOOSE]:e[s.PRERELEASE]);if(!h||h[1]!==i)throw new Error(`invalid identifier: ${i}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,f),this.inc("pre",i,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,f),this.inc("pre",i,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let d=this.prerelease.length;for(;--d>=0;)typeof this.prerelease[d]=="number"&&(this.prerelease[d]++,d=-2);if(d===-1){if(i===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(i){let d=[i,h];f===!1&&(d=[i]),a(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=d):this.prerelease=d}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return xe=u,xe}var Oe,Jt;function K(){if(Jt)return Oe;Jt=1;const t=V();return Oe=(n,e,s=!1)=>{if(n instanceof t)return n;try{return new t(n,e)}catch(o){if(!s)return null;throw o}},Oe}var $e,Kt;function jn(){if(Kt)return $e;Kt=1;const t=K();return $e=(n,e)=>{const s=t(n,e);return s?s.version:null},$e}var Le,Zt;function Bn(){if(Zt)return Le;Zt=1;const t=K();return Le=(n,e)=>{const s=t(n.trim().replace(/^[=v]+/,""),e);return s?s.version:null},Le}var Se,er;function Un(){if(er)return Se;er=1;const t=V();return Se=(n,e,s,o,a)=>{typeof s=="string"&&(a=o,o=s,s=void 0);try{return new t(n instanceof t?n.version:n,s).inc(e,o,a).version}catch{return null}},Se}var Ne,tr;function Gn(){if(tr)return Ne;tr=1;const t=K();return Ne=(n,e)=>{const s=t(n,null,!0),o=t(e,null,!0),a=s.compare(o);if(a===0)return null;const u=a>0,l=u?s:o,c=u?o:s,i=!!l.prerelease.length;if(!!c.prerelease.length&&!i){if(!c.patch&&!c.minor)return"major";if(c.compareMain(l)===0)return c.minor&&!c.patch?"minor":"patch"}const h=i?"pre":"";return s.major!==o.major?h+"major":s.minor!==o.minor?h+"minor":s.patch!==o.patch?h+"patch":"prerelease"},Ne}var Pe,rr;function Mn(){if(rr)return Pe;rr=1;const t=V();return Pe=(n,e)=>new t(n,e).major,Pe}var be,nr;function Vn(){if(nr)return be;nr=1;const t=V();return be=(n,e)=>new t(n,e).minor,be}var qe,sr;function kn(){if(sr)return qe;sr=1;const t=V();return qe=(n,e)=>new t(n,e).patch,qe}var De,ir;function Xn(){if(ir)return De;ir=1;const t=K();return De=(n,e)=>{const s=t(n,e);return s&&s.prerelease.length?s.prerelease:null},De}var Fe,or;function z(){if(or)return Fe;or=1;const t=V();return Fe=(n,e,s)=>new t(n,s).compare(new t(e,s)),Fe}var je,ar;function zn(){if(ar)return je;ar=1;const t=z();return je=(n,e,s)=>t(e,n,s),je}var Be,ur;function Hn(){if(ur)return Be;ur=1;const t=z();return Be=(n,e)=>t(n,e,!0),Be}var Ue,lr;function Et(){if(lr)return Ue;lr=1;const t=V();return Ue=(n,e,s)=>{const o=new t(n,s),a=new t(e,s);return o.compare(a)||o.compareBuild(a)},Ue}var Ge,cr;function Yn(){if(cr)return Ge;cr=1;const t=Et();return Ge=(n,e)=>n.sort((s,o)=>t(s,o,e)),Ge}var Me,fr;function Wn(){if(fr)return Me;fr=1;const t=Et();return Me=(n,e)=>n.sort((s,o)=>t(o,s,e)),Me}var Ve,hr;function de(){if(hr)return Ve;hr=1;const t=z();return Ve=(n,e,s)=>t(n,e,s)>0,Ve}var ke,dr;function Rt(){if(dr)return ke;dr=1;const t=z();return ke=(n,e,s)=>t(n,e,s)<0,ke}var Xe,pr;function zr(){if(pr)return Xe;pr=1;const t=z();return Xe=(n,e,s)=>t(n,e,s)===0,Xe}var ze,mr;function Hr(){if(mr)return ze;mr=1;const t=z();return ze=(n,e,s)=>t(n,e,s)!==0,ze}var He,_r;function It(){if(_r)return He;_r=1;const t=z();return He=(n,e,s)=>t(n,e,s)>=0,He}var Ye,yr;function wt(){if(yr)return Ye;yr=1;const t=z();return Ye=(n,e,s)=>t(n,e,s)<=0,Ye}var We,vr;function Yr(){if(vr)return We;vr=1;const t=zr(),r=Hr(),n=de(),e=It(),s=Rt(),o=wt();return We=(u,l,c,i)=>{switch(l){case"===":return typeof u=="object"&&(u=u.version),typeof c=="object"&&(c=c.version),u===c;case"!==":return typeof u=="object"&&(u=u.version),typeof c=="object"&&(c=c.version),u!==c;case"":case"=":case"==":return t(u,c,i);case"!=":return r(u,c,i);case">":return n(u,c,i);case">=":return e(u,c,i);case"<":return s(u,c,i);case"<=":return o(u,c,i);default:throw new TypeError(`Invalid operator: ${l}`)}},We}var Qe,gr;function Qn(){if(gr)return Qe;gr=1;const t=V(),r=K(),{safeRe:n,t:e}=ne();return Qe=(o,a)=>{if(o instanceof t)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;a=a||{};let u=null;if(!a.rtl)u=o.match(a.includePrerelease?n[e.COERCEFULL]:n[e.COERCE]);else{const d=a.includePrerelease?n[e.COERCERTLFULL]:n[e.COERCERTL];let v;for(;(v=d.exec(o))&&(!u||u.index+u[0].length!==o.length);)(!u||v.index+v[0].length!==u.index+u[0].length)&&(u=v),d.lastIndex=v.index+v[1].length+v[2].length;d.lastIndex=-1}if(u===null)return null;const l=u[2],c=u[3]||"0",i=u[4]||"0",f=a.includePrerelease&&u[5]?`-${u[5]}`:"",h=a.includePrerelease&&u[6]?`+${u[6]}`:"";return r(`${l}.${c}.${i}${f}${h}`,a)},Qe}var Je,Er;function Jn(){if(Er)return Je;Er=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const e=this.map.get(n);if(e!==void 0)return this.map.delete(n),this.map.set(n,e),e}delete(n){return this.map.delete(n)}set(n,e){if(!this.delete(n)&&e!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,e)}return this}}return Je=t,Je}var Ke,Rr;function H(){if(Rr)return Ke;Rr=1;const t=/\s+/g;class r{constructor(y,A){if(A=s(A),y instanceof r)return y.loose===!!A.loose&&y.includePrerelease===!!A.includePrerelease?y:new r(y.raw,A);if(y instanceof o)return this.raw=y.value,this.set=[[y]],this.formatted=void 0,this;if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=y.trim().replace(t," "),this.set=this.raw.split("||").map(w=>this.parseRange(w.trim())).filter(w=>w.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const w=this.set[0];if(this.set=this.set.filter(x=>!p(x[0])),this.set.length===0)this.set=[w];else if(this.set.length>1){for(const x of this.set)if(x.length===1&&_(x[0])){this.set=[x];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let y=0;y<this.set.length;y++){y>0&&(this.formatted+="||");const A=this.set[y];for(let w=0;w<A.length;w++)w>0&&(this.formatted+=" "),this.formatted+=A[w].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(y){const w=((this.options.includePrerelease&&d)|(this.options.loose&&v))+":"+y,x=e.get(w);if(x)return x;const C=this.options.loose,O=C?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];y=y.replace(O,ve(this.options.includePrerelease)),a("hyphen replace",y),y=y.replace(l[c.COMPARATORTRIM],i),a("comparator trim",y),y=y.replace(l[c.TILDETRIM],f),a("tilde trim",y),y=y.replace(l[c.CARETTRIM],h),a("caret trim",y);let N=y.split(" ").map(j=>S(j,this.options)).join(" ").split(/\s+/).map(j=>ye(j,this.options));C&&(N=N.filter(j=>(a("loose invalid filter",j,this.options),!!j.match(l[c.COMPARATORLOOSE])))),a("range list",N);const L=new Map,P=N.map(j=>new o(j,this.options));for(const j of P){if(p(j))return[j];L.set(j.value,j)}L.size>1&&L.has("")&&L.delete("");const M=[...L.values()];return e.set(w,M),M}intersects(y,A){if(!(y instanceof r))throw new TypeError("a Range is required");return this.set.some(w=>I(w,A)&&y.set.some(x=>I(x,A)&&w.every(C=>x.every(O=>C.intersects(O,A)))))}test(y){if(!y)return!1;if(typeof y=="string")try{y=new u(y,this.options)}catch{return!1}for(let A=0;A<this.set.length;A++)if(ge(this.set[A],y,this.options))return!0;return!1}}Ke=r;const n=Jn(),e=new n,s=gt(),o=pe(),a=he(),u=V(),{safeRe:l,t:c,comparatorTrimReplace:i,tildeTrimReplace:f,caretTrimReplace:h}=ne(),{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:v}=fe(),p=g=>g.value==="<0.0.0-0",_=g=>g.value==="",I=(g,y)=>{let A=!0;const w=g.slice();let x=w.pop();for(;A&&w.length;)A=w.every(C=>x.intersects(C,y)),x=w.pop();return A},S=(g,y)=>(g=g.replace(l[c.BUILD],""),a("comp",g,y),g=b(g,y),a("caret",g),g=G(g,y),a("tildes",g),g=$(g,y),a("xrange",g),g=_e(g,y),a("stars",g),g),R=g=>!g||g.toLowerCase()==="x"||g==="*",G=(g,y)=>g.trim().split(/\s+/).map(A=>F(A,y)).join(" "),F=(g,y)=>{const A=y.loose?l[c.TILDELOOSE]:l[c.TILDE];return g.replace(A,(w,x,C,O,N)=>{a("tilde",g,w,x,C,O,N);let L;return R(x)?L="":R(C)?L=`>=${x}.0.0 <${+x+1}.0.0-0`:R(O)?L=`>=${x}.${C}.0 <${x}.${+C+1}.0-0`:N?(a("replaceTilde pr",N),L=`>=${x}.${C}.${O}-${N} <${x}.${+C+1}.0-0`):L=`>=${x}.${C}.${O} <${x}.${+C+1}.0-0`,a("tilde return",L),L})},b=(g,y)=>g.trim().split(/\s+/).map(A=>B(A,y)).join(" "),B=(g,y)=>{a("caret",g,y);const A=y.loose?l[c.CARETLOOSE]:l[c.CARET],w=y.includePrerelease?"-0":"";return g.replace(A,(x,C,O,N,L)=>{a("caret",g,x,C,O,N,L);let P;return R(C)?P="":R(O)?P=`>=${C}.0.0${w} <${+C+1}.0.0-0`:R(N)?C==="0"?P=`>=${C}.${O}.0${w} <${C}.${+O+1}.0-0`:P=`>=${C}.${O}.0${w} <${+C+1}.0.0-0`:L?(a("replaceCaret pr",L),C==="0"?O==="0"?P=`>=${C}.${O}.${N}-${L} <${C}.${O}.${+N+1}-0`:P=`>=${C}.${O}.${N}-${L} <${C}.${+O+1}.0-0`:P=`>=${C}.${O}.${N}-${L} <${+C+1}.0.0-0`):(a("no pr"),C==="0"?O==="0"?P=`>=${C}.${O}.${N}${w} <${C}.${O}.${+N+1}-0`:P=`>=${C}.${O}.${N}${w} <${C}.${+O+1}.0-0`:P=`>=${C}.${O}.${N} <${+C+1}.0.0-0`),a("caret return",P),P})},$=(g,y)=>(a("replaceXRanges",g,y),g.split(/\s+/).map(A=>Z(A,y)).join(" ")),Z=(g,y)=>{g=g.trim();const A=y.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return g.replace(A,(w,x,C,O,N,L)=>{a("xRange",g,w,x,C,O,N,L);const P=R(C),M=P||R(O),j=M||R(N),ee=j;return x==="="&&ee&&(x=""),L=y.includePrerelease?"-0":"",P?x===">"||x==="<"?w="<0.0.0-0":w="*":x&&ee?(M&&(O=0),N=0,x===">"?(x=">=",M?(C=+C+1,O=0,N=0):(O=+O+1,N=0)):x==="<="&&(x="<",M?C=+C+1:O=+O+1),x==="<"&&(L="-0"),w=`${x+C}.${O}.${N}${L}`):M?w=`>=${C}.0.0${L} <${+C+1}.0.0-0`:j&&(w=`>=${C}.${O}.0${L} <${C}.${+O+1}.0-0`),a("xRange return",w),w})},_e=(g,y)=>(a("replaceStars",g,y),g.trim().replace(l[c.STAR],"")),ye=(g,y)=>(a("replaceGTE0",g,y),g.trim().replace(l[y.includePrerelease?c.GTE0PRE:c.GTE0],"")),ve=g=>(y,A,w,x,C,O,N,L,P,M,j,ee)=>(R(w)?A="":R(x)?A=`>=${w}.0.0${g?"-0":""}`:R(C)?A=`>=${w}.${x}.0${g?"-0":""}`:O?A=`>=${A}`:A=`>=${A}${g?"-0":""}`,R(P)?L="":R(M)?L=`<${+P+1}.0.0-0`:R(j)?L=`<${P}.${+M+1}.0-0`:ee?L=`<=${P}.${M}.${j}-${ee}`:g?L=`<${P}.${M}.${+j+1}-0`:L=`<=${L}`,`${A} ${L}`.trim()),ge=(g,y,A)=>{for(let w=0;w<g.length;w++)if(!g[w].test(y))return!1;if(y.prerelease.length&&!A.includePrerelease){for(let w=0;w<g.length;w++)if(a(g[w].semver),g[w].semver!==o.ANY&&g[w].semver.prerelease.length>0){const x=g[w].semver;if(x.major===y.major&&x.minor===y.minor&&x.patch===y.patch)return!0}return!1}return!0};return Ke}var Ze,Ir;function pe(){if(Ir)return Ze;Ir=1;const t=Symbol("SemVer ANY");class r{static get ANY(){return t}constructor(i,f){if(f=n(f),i instanceof r){if(i.loose===!!f.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),a("comparator",i,f),this.options=f,this.loose=!!f.loose,this.parse(i),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(i){const f=this.options.loose?e[s.COMPARATORLOOSE]:e[s.COMPARATOR],h=i.match(f);if(!h)throw new TypeError(`Invalid comparator: ${i}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new u(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(i){if(a("Comparator.test",i,this.options.loose),this.semver===t||i===t)return!0;if(typeof i=="string")try{i=new u(i,this.options)}catch{return!1}return o(i,this.operator,this.semver,this.options)}intersects(i,f){if(!(i instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(i.value,f).test(this.value):i.operator===""?i.value===""?!0:new l(this.value,f).test(i.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||i.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||i.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&i.operator.startsWith(">")||this.operator.startsWith("<")&&i.operator.startsWith("<")||this.semver.version===i.semver.version&&this.operator.includes("=")&&i.operator.includes("=")||o(this.semver,"<",i.semver,f)&&this.operator.startsWith(">")&&i.operator.startsWith("<")||o(this.semver,">",i.semver,f)&&this.operator.startsWith("<")&&i.operator.startsWith(">")))}}Ze=r;const n=gt(),{safeRe:e,t:s}=ne(),o=Yr(),a=he(),u=V(),l=H();return Ze}var et,wr;function me(){if(wr)return et;wr=1;const t=H();return et=(n,e,s)=>{try{e=new t(e,s)}catch{return!1}return e.test(n)},et}var tt,Cr;function Kn(){if(Cr)return tt;Cr=1;const t=H();return tt=(n,e)=>new t(n,e).set.map(s=>s.map(o=>o.value).join(" ").trim().split(" ")),tt}var rt,Tr;function Zn(){if(Tr)return rt;Tr=1;const t=V(),r=H();return rt=(e,s,o)=>{let a=null,u=null,l=null;try{l=new r(s,o)}catch{return null}return e.forEach(c=>{l.test(c)&&(!a||u.compare(c)===-1)&&(a=c,u=new t(a,o))}),a},rt}var nt,Ar;function es(){if(Ar)return nt;Ar=1;const t=V(),r=H();return nt=(e,s,o)=>{let a=null,u=null,l=null;try{l=new r(s,o)}catch{return null}return e.forEach(c=>{l.test(c)&&(!a||u.compare(c)===1)&&(a=c,u=new t(a,o))}),a},nt}var st,xr;function ts(){if(xr)return st;xr=1;const t=V(),r=H(),n=de();return st=(s,o)=>{s=new r(s,o);let a=new t("0.0.0");if(s.test(a)||(a=new t("0.0.0-0"),s.test(a)))return a;a=null;for(let u=0;u<s.set.length;++u){const l=s.set[u];let c=null;l.forEach(i=>{const f=new t(i.semver.version);switch(i.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!c||n(f,c))&&(c=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),c&&(!a||n(a,c))&&(a=c)}return a&&s.test(a)?a:null},st}var it,Or;function rs(){if(Or)return it;Or=1;const t=H();return it=(n,e)=>{try{return new t(n,e).range||"*"}catch{return null}},it}var ot,$r;function Ct(){if($r)return ot;$r=1;const t=V(),r=pe(),{ANY:n}=r,e=H(),s=me(),o=de(),a=Rt(),u=wt(),l=It();return ot=(i,f,h,d)=>{i=new t(i,d),f=new e(f,d);let v,p,_,I,S;switch(h){case">":v=o,p=u,_=a,I=">",S=">=";break;case"<":v=a,p=l,_=o,I="<",S="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(i,f,d))return!1;for(let R=0;R<f.set.length;++R){const G=f.set[R];let F=null,b=null;if(G.forEach(B=>{B.semver===n&&(B=new r(">=0.0.0")),F=F||B,b=b||B,v(B.semver,F.semver,d)?F=B:_(B.semver,b.semver,d)&&(b=B)}),F.operator===I||F.operator===S||(!b.operator||b.operator===I)&&p(i,b.semver))return!1;if(b.operator===S&&_(i,b.semver))return!1}return!0},ot}var at,Lr;function ns(){if(Lr)return at;Lr=1;const t=Ct();return at=(n,e,s)=>t(n,e,">",s),at}var ut,Sr;function ss(){if(Sr)return ut;Sr=1;const t=Ct();return ut=(n,e,s)=>t(n,e,"<",s),ut}var lt,Nr;function is(){if(Nr)return lt;Nr=1;const t=H();return lt=(n,e,s)=>(n=new t(n,s),e=new t(e,s),n.intersects(e,s)),lt}var ct,Pr;function os(){if(Pr)return ct;Pr=1;const t=me(),r=z();return ct=(n,e,s)=>{const o=[];let a=null,u=null;const l=n.sort((h,d)=>r(h,d,s));for(const h of l)t(h,e,s)?(u=h,a||(a=h)):(u&&o.push([a,u]),u=null,a=null);a&&o.push([a,null]);const c=[];for(const[h,d]of o)h===d?c.push(h):!d&&h===l[0]?c.push("*"):d?h===l[0]?c.push(`<=${d}`):c.push(`${h} - ${d}`):c.push(`>=${h}`);const i=c.join(" || "),f=typeof e.raw=="string"?e.raw:String(e);return i.length<f.length?i:e},ct}var ft,br;function as(){if(br)return ft;br=1;const t=H(),r=pe(),{ANY:n}=r,e=me(),s=z(),o=(f,h,d={})=>{if(f===h)return!0;f=new t(f,d),h=new t(h,d);let v=!1;e:for(const p of f.set){for(const _ of h.set){const I=l(p,_,d);if(v=v||I!==null,I)continue e}if(v)return!1}return!0},a=[new r(">=0.0.0-0")],u=[new r(">=0.0.0")],l=(f,h,d)=>{if(f===h)return!0;if(f.length===1&&f[0].semver===n){if(h.length===1&&h[0].semver===n)return!0;d.includePrerelease?f=a:f=u}if(h.length===1&&h[0].semver===n){if(d.includePrerelease)return!0;h=u}const v=new Set;let p,_;for(const $ of f)$.operator===">"||$.operator===">="?p=c(p,$,d):$.operator==="<"||$.operator==="<="?_=i(_,$,d):v.add($.semver);if(v.size>1)return null;let I;if(p&&_){if(I=s(p.semver,_.semver,d),I>0)return null;if(I===0&&(p.operator!==">="||_.operator!=="<="))return null}for(const $ of v){if(p&&!e($,String(p),d)||_&&!e($,String(_),d))return null;for(const Z of h)if(!e($,String(Z),d))return!1;return!0}let S,R,G,F,b=_&&!d.includePrerelease&&_.semver.prerelease.length?_.semver:!1,B=p&&!d.includePrerelease&&p.semver.prerelease.length?p.semver:!1;b&&b.prerelease.length===1&&_.operator==="<"&&b.prerelease[0]===0&&(b=!1);for(const $ of h){if(F=F||$.operator===">"||$.operator===">=",G=G||$.operator==="<"||$.operator==="<=",p){if(B&&$.semver.prerelease&&$.semver.prerelease.length&&$.semver.major===B.major&&$.semver.minor===B.minor&&$.semver.patch===B.patch&&(B=!1),$.operator===">"||$.operator===">="){if(S=c(p,$,d),S===$&&S!==p)return!1}else if(p.operator===">="&&!e(p.semver,String($),d))return!1}if(_){if(b&&$.semver.prerelease&&$.semver.prerelease.length&&$.semver.major===b.major&&$.semver.minor===b.minor&&$.semver.patch===b.patch&&(b=!1),$.operator==="<"||$.operator==="<="){if(R=i(_,$,d),R===$&&R!==_)return!1}else if(_.operator==="<="&&!e(_.semver,String($),d))return!1}if(!$.operator&&(_||p)&&I!==0)return!1}return!(p&&G&&!_&&I!==0||_&&F&&!p&&I!==0||B||b)},c=(f,h,d)=>{if(!f)return h;const v=s(f.semver,h.semver,d);return v>0?f:v<0||h.operator===">"&&f.operator===">="?h:f},i=(f,h,d)=>{if(!f)return h;const v=s(f.semver,h.semver,d);return v<0?f:v>0||h.operator==="<"&&f.operator==="<="?h:f};return ft=o,ft}var ht,qr;function us(){if(qr)return ht;qr=1;const t=ne(),r=fe(),n=V(),e=Xr(),s=K(),o=jn(),a=Bn(),u=Un(),l=Gn(),c=Mn(),i=Vn(),f=kn(),h=Xn(),d=z(),v=zn(),p=Hn(),_=Et(),I=Yn(),S=Wn(),R=de(),G=Rt(),F=zr(),b=Hr(),B=It(),$=wt(),Z=Yr(),_e=Qn(),ye=pe(),ve=H(),ge=me(),g=Kn(),y=Zn(),A=es(),w=ts(),x=rs(),C=Ct(),O=ns(),N=ss(),L=is(),P=os(),M=as();return ht={parse:s,valid:o,clean:a,inc:u,diff:l,major:c,minor:i,patch:f,prerelease:h,compare:d,rcompare:v,compareLoose:p,compareBuild:_,sort:I,rsort:S,gt:R,lt:G,eq:F,neq:b,gte:B,lte:$,cmp:Z,coerce:_e,Comparator:ye,Range:ve,satisfies:ge,toComparators:g,maxSatisfying:y,minSatisfying:A,minVersion:w,validRange:x,outside:C,gtr:O,ltr:N,intersects:L,simplifyRange:P,subset:M,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:e.compareIdentifiers,rcompareIdentifiers:e.rcompareIdentifiers},ht}us();new TextEncoder;const dt=10,Dr=(t=0)=>r=>`\x1B[${r+t}m`,Fr=(t=0)=>r=>`\x1B[${38+t};5;${r}m`,jr=(t=0)=>(r,n,e)=>`\x1B[${38+t};2;${r};${n};${e}m`,q={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(q.modifier);const ls=Object.keys(q.color),cs=Object.keys(q.bgColor);[...ls,...cs];function fs(){const t=new Map;for(const[r,n]of Object.entries(q)){for(const[e,s]of Object.entries(n))q[e]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[e]=q[e],t.set(s[0],s[1]);Object.defineProperty(q,r,{value:n,enumerable:!1})}return Object.defineProperty(q,"codes",{value:t,enumerable:!1}),q.color.close="\x1B[39m",q.bgColor.close="\x1B[49m",q.color.ansi=Dr(),q.color.ansi256=Fr(),q.color.ansi16m=jr(),q.bgColor.ansi=Dr(dt),q.bgColor.ansi256=Fr(dt),q.bgColor.ansi16m=jr(dt),Object.defineProperties(q,{rgbToAnsi256:{value(r,n,e){return r===n&&n===e?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(e/255*5)},enumerable:!1},hexToRgb:{value(r){const n=/[a-f\d]{6}|[a-f\d]{3}/i.exec(r.toString(16));if(!n)return[0,0,0];let[e]=n;e.length===3&&(e=[...e].map(o=>o+o).join(""));const s=Number.parseInt(e,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:r=>q.rgbToAnsi256(...q.hexToRgb(r)),enumerable:!1},ansi256ToAnsi:{value(r){if(r<8)return 30+r;if(r<16)return 90+(r-8);let n,e,s;if(r>=232)n=((r-232)*10+8)/255,e=n,s=n;else{r-=16;const u=r%36;n=Math.floor(r/36)/5,e=Math.floor(u/6)/5,s=u%6/5}const o=Math.max(n,e,s)*2;if(o===0)return 30;let a=30+(Math.round(s)<<2|Math.round(e)<<1|Math.round(n));return o===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(r,n,e)=>q.ansi256ToAnsi(q.rgbToAnsi256(r,n,e)),enumerable:!1},hexToAnsi:{value:r=>q.ansi256ToAnsi(q.hexToAnsi256(r)),enumerable:!1}}),q}const hs=fs(),{color:ws}=hs;const ds=Object.prototype.hasOwnProperty;function ps(t,r){return ds.call(t,r)}function ms(t){if(Array.isArray(t)){const n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=""+e;return n}if(Object.keys)return Object.keys(t);let r=[];for(let n in t)ps(t,n)&&r.push(n);return r}function Q(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function pt(t){let r=0;const n=t.length;let e;for(;r<n;){if(e=t.charCodeAt(r),e>=48&&e<=57){r++;continue}return!1}return!0}function _s(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function mt(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,e=t.length;n<e;n++)if(mt(t[n]))return!0}else if(typeof t=="object"){const n=ms(t),e=n.length;for(var r=0;r<e;r++)if(mt(t[n[r]]))return!0}}return!1}function Br(t,r){const n=[t];for(const e in r){const s=typeof r[e]=="object"?JSON.stringify(r[e],null,2):r[e];typeof s<"u"&&n.push(`${e}: ${s}`)}return n.join(`
`)}var ys=class extends Error{constructor(t,r,n,e,s){super(Br(t,{name:r,index:n,operation:e,tree:s})),this.name=r,this.index=n,this.operation=e,this.tree=s,Object.setPrototypeOf(this,new.target.prototype),this.message=Br(t,{name:r,index:n,operation:e,tree:s})}},vs=en({JsonPatchError:()=>D,_areEquals:()=>re,applyOperation:()=>W,applyPatch:()=>Wr,applyReducer:()=>Rs,deepClone:()=>gs,getValueByPointer:()=>le,validate:()=>Qr,validator:()=>ce});const D=ys,gs=Q,J={add:function(t,r,n){if(r==="__proto__"||r==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");return t[r]=this.value,{newDocument:n}},remove:function(t,r,n){if(r==="__proto__"||r==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var e=t[r];return delete t[r],{newDocument:n,removed:e}},replace:function(t,r,n){if(r==="__proto__"||r==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var e=t[r];return t[r]=this.value,{newDocument:n,removed:e}},move:function(t,r,n){let e=le(n,this.path);e&&(e=Q(e));const s=W(n,{op:"remove",path:this.from}).removed;return W(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:e}},copy:function(t,r,n){const e=le(n,this.from);return W(n,{op:"add",path:this.path,value:Q(e)}),{newDocument:n}},test:function(t,r,n){return{newDocument:n,test:re(t[r],this.value)}},_get:function(t,r,n){return this.value=t[r],{newDocument:n}}};var Es={add:function(t,r,n){return pt(r)?t.splice(r,0,this.value):t[r]=this.value,{newDocument:n,index:r}},remove:function(t,r,n){return{newDocument:n,removed:t.splice(r,1)[0]}},replace:function(t,r,n){var e=t[r];return t[r]=this.value,{newDocument:n,removed:e}},move:J.move,copy:J.copy,test:J.test,_get:J._get};function le(t,r){if(r=="")return t;var n={op:"_get",path:r};return W(t,n),n.value}function W(t,r,n=!1,e=!0,s=!0,o=0){if(n&&(typeof n=="function"?n(r,0,t,r.path):ce(r,0)),r.path===""){let a={newDocument:t};if(r.op==="add")return a.newDocument=r.value,a;if(r.op==="replace")return a.newDocument=r.value,a.removed=t,a;if(r.op==="move"||r.op==="copy")return a.newDocument=le(t,r.from),r.op==="move"&&(a.removed=t),a;if(r.op==="test"){if(a.test=re(t,r.value),a.test===!1)throw new D("Test operation failed","TEST_OPERATION_FAILED",o,r,t);return a.newDocument=t,a}else{if(r.op==="remove")return a.removed=t,a.newDocument=null,a;if(r.op==="_get")return r.value=t,a;if(n)throw new D("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,r,t);return a}}else{e||(t=Q(t));const a=(r.path||"").split("/");let u=t,l=1,c=a.length,i,f,h;for(typeof n=="function"?h=n:h=ce;;){if(f=a[l],f&&f.indexOf("~")!=-1&&(f=_s(f)),s&&(f=="__proto__"||f=="prototype"&&l>0&&a[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&i===void 0&&(u[f]===void 0?i=a.slice(0,l).join("/"):l==c-1&&(i=r.path),i!==void 0&&h(r,0,t,i)),l++,Array.isArray(u)){if(f==="-")f=u.length;else{if(n&&!pt(f))throw new D("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,r,t);pt(f)&&(f=~~f)}if(l>=c){if(n&&r.op==="add"&&f>u.length)throw new D("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,r,t);const d=Es[r.op].call(r,u,f,t);if(d.test===!1)throw new D("Test operation failed","TEST_OPERATION_FAILED",o,r,t);return d}}else if(l>=c){const d=J[r.op].call(r,u,f,t);if(d.test===!1)throw new D("Test operation failed","TEST_OPERATION_FAILED",o,r,t);return d}if(u=u[f],n&&l<c&&(!u||typeof u!="object"))throw new D("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,r,t)}}}function Wr(t,r,n,e=!0,s=!0){if(n&&!Array.isArray(r))throw new D("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");e||(t=Q(t));const o=new Array(r.length);for(let a=0,u=r.length;a<u;a++)o[a]=W(t,r[a],n,!0,s,a),t=o[a].newDocument;return o.newDocument=t,o}function Rs(t,r,n){const e=W(t,r);if(e.test===!1)throw new D("Test operation failed","TEST_OPERATION_FAILED",n,r,t);return e.newDocument}function ce(t,r,n,e){if(typeof t!="object"||t===null||Array.isArray(t))throw new D("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,t,n);if(J[t.op]){if(typeof t.path!="string")throw new D("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new D('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new D("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new D("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&mt(t.value))throw new D("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,o=e.split("/").length;if(s!==o+1&&s!==o)throw new D("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==e)throw new D("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,t,n)}else if(t.op==="move"||t.op==="copy"){var a=Qr([{op:"_get",path:t.from,value:void 0}],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new D("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,t,n)}}}else throw new D("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,n)}function Qr(t,r,n){try{if(!Array.isArray(t))throw new D("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)Wr(Q(r),Q(t),n||!0);else{n=n||ce;for(var e=0;e<t.length;e++)n(t[e],e,r,void 0)}}catch(s){if(s instanceof D)return s;throw s}}function re(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=Array.isArray(t),e=Array.isArray(r),s,o,a;if(n&&e){if(o=t.length,o!=r.length)return!1;for(s=o;s--!==0;)if(!re(t[s],r[s]))return!1;return!0}if(n!=e)return!1;var u=Object.keys(t);if(o=u.length,o!==Object.keys(r).length)return!1;for(s=o;s--!==0;)if(!r.hasOwnProperty(u[s]))return!1;for(s=o;s--!==0;)if(a=u[s],!re(t[a],r[a]))return!1;return!0}return t!==t&&r!==r}({...vs});
