import{w as z,a as _,b as S,u as A,r as d}from"./chunk-WWGJGFF6-C0NtPc5H.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{B as P}from"./BottomNavigation-vdZES2hj.js";import{c as r}from"./utils-BQHNewu7.js";import{D as p}from"./luxon-BDx6lZXm.js";import{t as f}from"./index-XQpFve_7.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./index-Dc7LDrXT.js";const R=z(function(){const{allCharacters:j,selectedCharacter:i,characterStat:n,missions:m,notices:h,leaderboard:s,feedPosts:b,characterId:g}=_(),a=S(),l=A(),[w,N]=d.useState("All"),[v,c]=d.useState(!1),[o,u]=d.useState(""),k=j;d.useEffect(()=>{l.data?.success?(f.success("Post shared with the fandom!"),c(!1),u("")):l.data?.error&&f.error(l.data.error)},[l.data]);const y=t=>{t.preventDefault(),l.submit({intent:"createPost",content:o},{method:"POST"})};return e.jsxs("div",{className:"bg-background-light dark:bg-background-dark text-slate-900 dark:text-white font-display antialiased min-h-screen relative pb-24",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-black/5 dark:border-white/5",children:e.jsxs("div",{className:"flex items-center p-4 justify-between max-w-md mx-auto w-full",children:[e.jsx("button",{onClick:()=>a("/"),className:"flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors text-slate-800 dark:text-white",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-tight flex-1 text-center",children:"Fandom Lounge"}),e.jsx("button",{className:"flex size-10 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-800 dark:text-white",children:"notifications"}),e.jsx("span",{className:"absolute top-0 right-0 size-2.5 bg-primary rounded-full border-2 border-background-light dark:border-background-dark"})]})})]})}),e.jsxs("div",{className:"max-w-md mx-auto w-full flex flex-col gap-6 pt-4",children:[e.jsx("div",{className:"w-full overflow-x-auto scrollbar-hide px-4",children:e.jsx("div",{className:"flex gap-4 min-w-max",children:k.map(t=>{const x=t.id===g;return e.jsxs("div",{onClick:()=>a(`/fandom?characterId=${t.id}`),className:"flex flex-col items-center gap-2 group cursor-pointer",children:[e.jsx("div",{className:r("p-[3px] rounded-full transition-all",x?"bg-gradient-to-tr from-primary to-purple-400":"bg-transparent"),children:e.jsx("div",{className:r("size-16 rounded-full border-4 overflow-hidden",x?"border-background-light dark:border-background-dark bg-surface-dark":"border-transparent bg-surface-dark/50 opacity-70 group-hover:opacity-100"),children:e.jsx("img",{className:"w-full h-full object-cover",src:t.media?.find(C=>C.type==="AVATAR")?.url||t.media?.[0]?.url,alt:t.name})})}),e.jsx("span",{className:r("text-xs",x?"font-bold text-primary":"font-medium"),children:t.name})]},t.id)})})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-surface-dark dark:bg-surface-dark shadow-lg dark:shadow-none group",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-40 mix-blend-overlay",style:{backgroundImage:`url('${i.media?.find(t=>t.type==="COVER")?.url||i.media?.[0]?.url}')`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-transparent to-transparent opacity-90"}),e.jsxs("div",{className:"relative p-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-primary/20 text-primary text-xs font-bold mb-2 border border-primary/30",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"star"}),"Selected Star"]}),e.jsxs("h2",{className:"text-2xl font-bold text-white leading-tight",children:[i.name,"'s Official Space"]}),e.jsxs("p",{className:"text-white/60 text-sm",children:[i.role," â€¢ AI Generation 3"]})]}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"size-12 rounded-full border-2 border-primary p-1 bg-surface-dark overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full bg-primary/20",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"favorite"}),e.jsx("span",{className:"text-[10px] font-bold text-white",children:n?.totalHearts||0})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-white/80",children:[e.jsx("span",{children:"Heart Gauge"}),e.jsxs("span",{className:"text-primary",children:[n?.totalHearts||0," / 1000"]})]}),e.jsx("div",{className:"h-2 w-full bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full shadow-[0_0_10px_rgba(238,43,140,0.5)] transition-all duration-1000",style:{width:`${Math.min((n?.totalHearts||0)/1e3*100,100)}%`}})}),e.jsx("p",{className:"text-xs text-white/50 text-right",children:"Send hearts to level up!"})]}),e.jsxs("button",{onClick:()=>a(`/character/${i.id}`),className:"mt-2 w-full py-3 rounded-xl bg-primary hover:bg-primary/90 text-white font-bold text-sm shadow-lg shadow-primary/25 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined",children:"forum"}),"Enter Lounge"]})]})]})}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex items-center justify-between pr-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"new_releases"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white text-slate-900",children:"Official Updates"})]}),e.jsx("button",{onClick:()=>a("/notices"),className:"text-sm font-medium text-primary uppercase tracking-widest",children:"See All"})]}),e.jsx("div",{className:"flex overflow-x-auto gap-4 pb-4 pr-4 scrollbar-hide",children:h.length===0?e.jsx("div",{className:"min-w-[260px] h-32 rounded-xl bg-white dark:bg-surface-dark border border-slate-100 dark:border-white/5 flex items-center justify-center",children:e.jsx("p",{className:"text-white/20 text-xs font-bold uppercase",children:"No updates yet"})}):h.map(t=>e.jsxs("div",{onClick:()=>a(`/notices/${t.id}`),className:"min-w-[260px] rounded-xl overflow-hidden bg-white dark:bg-surface-dark border border-slate-100 dark:border-white/5 shadow-sm group cursor-pointer",children:[e.jsxs("div",{className:"aspect-[16/9] w-full bg-slate-200 relative",children:[t.imageUrl?e.jsx("img",{className:"w-full h-full object-cover",src:t.imageUrl,alt:t.title}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/30 to-purple-600/30"}),e.jsx("div",{className:r("absolute top-2 left-2 px-2 py-0.5 rounded backdrop-blur-sm text-[10px] font-bold text-white uppercase tracking-wider",t.type==="EVENT"?"bg-emerald-500":"bg-primary"),children:t.type})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h4",{className:"font-bold text-sm text-slate-900 dark:text-white line-clamp-2 leading-snug group-hover:text-primary transition-colors",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-white/40 mt-1",children:p.fromJSDate(new Date(t.createdAt)).toRelative()})]})]},t.id))})]}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold dark:text-white text-slate-900",children:"Missions"}),e.jsx("button",{onClick:()=>a("/missions"),className:"text-sm font-medium text-primary hover:text-primary/80",children:"View All"})]}),e.jsx("div",{className:"flex flex-col gap-3",children:m.length===0?e.jsx("div",{className:"p-8 text-center bg-white dark:bg-surface-dark rounded-xl border border-white/5",children:e.jsx("p",{className:"text-white/20 text-xs font-bold uppercase tracking-widest",children:"No missions available"})}):m.map(t=>e.jsxs("div",{className:r("p-4 rounded-xl bg-white dark:bg-surface-dark border border-slate-100 dark:border-white/5 shadow-sm flex items-center gap-4",t.completed&&"opacity-60"),children:[e.jsx("div",{className:"size-10 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"material-symbols-outlined text-primary",children:"target"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("p",{className:"text-sm font-bold dark:text-white truncate",children:t.title}),e.jsxs("span",{className:"text-xs font-bold text-primary",children:["+",t.rewardCredits," CHOCO"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full shadow-[0_0_5px_rgba(238,43,140,0.5)]",style:{width:`${t.progress}%`}})})]}),t.completed?e.jsx("button",{className:"shrink-0 size-8 rounded-full bg-emerald-500 text-white flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-sm font-black",children:"check"})}):e.jsx("button",{onClick:()=>a("/missions"),className:"shrink-0 px-3 py-1 rounded-lg bg-slate-100 dark:bg-white/10 text-xs font-bold text-slate-500 dark:text-white/50",children:"GO"})]},t.id))})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h3",{className:"text-xl font-bold dark:text-white text-slate-900 mb-4",children:"Top Collectors"}),e.jsx("div",{className:"bg-surface-dark/50 dark:bg-surface-dark rounded-2xl p-4 border border-slate-100 dark:border-white/5",children:s.length<3?e.jsx("div",{className:"py-8 text-center text-white/20 text-xs font-bold tracking-widest",children:"COMPETITION HEATING UP..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-end justify-center gap-4 mb-6 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 w-1/3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"size-12 rounded-full border-2 border-slate-400 overflow-hidden bg-slate-800",children:e.jsx("img",{className:"w-full h-full object-cover",src:s[1].avatar,alt:s[1].name})}),e.jsx("div",{className:"absolute -bottom-2 inset-x-0 flex justify-center",children:e.jsx("span",{className:"bg-slate-400 text-[10px] font-bold px-1.5 rounded text-white",children:"2"})})]}),e.jsx("p",{className:"text-xs font-bold text-white mt-1 truncate w-full text-center",children:s[1].name}),e.jsxs("p",{className:"text-[10px] text-white/50",children:[s[1].points," pts"]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1 w-1/3 -mt-6",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-500 text-lg animate-bounce",children:"crown"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"size-16 rounded-full border-4 border-yellow-500 overflow-hidden shadow-[0_0_15px_rgba(234,179,8,0.4)] bg-slate-800",children:e.jsx("img",{className:"w-full h-full object-cover",src:s[0].avatar,alt:s[0].name})}),e.jsx("div",{className:"absolute -bottom-2 inset-x-0 flex justify-center",children:e.jsx("span",{className:"bg-yellow-500 text-xs font-bold px-2 py-0.5 rounded text-black",children:"1"})})]}),e.jsx("p",{className:"text-sm font-bold text-primary mt-1 truncate w-full text-center",children:s[0].name}),e.jsxs("p",{className:"text-xs text-white/50",children:[s[0].points," pts"]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1 w-1/3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"size-12 rounded-full border-2 border-orange-700 overflow-hidden bg-slate-800",children:e.jsx("img",{className:"w-full h-full object-cover",src:s[2].avatar,alt:s[2].name})}),e.jsx("div",{className:"absolute -bottom-2 inset-x-0 flex justify-center",children:e.jsx("span",{className:"bg-orange-700 text-[10px] font-bold px-1.5 rounded text-white",children:"3"})})]}),e.jsx("p",{className:"text-xs font-bold text-white mt-1 truncate w-full text-center",children:s[2].name}),e.jsxs("p",{className:"text-[10px] text-white/50",children:[s[2].points," pts"]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:s.slice(3).map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"text-sm font-bold text-white/40 w-4 text-center",children:t.rank}),e.jsx("div",{className:"size-8 rounded-full bg-slate-700 overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:t.avatar,alt:t.name})}),e.jsx("p",{className:"text-sm font-medium text-white flex-1",children:t.name}),e.jsx("p",{className:"text-xs text-primary font-bold",children:t.points})]},t.rank))})]})})]}),e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold dark:text-white text-slate-900",children:"Fan Feed"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>N("All"),className:r("px-3 py-1 rounded-full text-xs font-bold",w==="All"?"bg-primary text-white":"bg-slate-200 dark:bg-white/10 dark:text-white/60 text-slate-600"),children:"All"})})]}),b.length===0?e.jsxs("div",{className:"py-20 text-center bg-white dark:bg-surface-dark border border-white/5 rounded-2xl",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"feed"}),e.jsx("p",{className:"text-white/10 text-xs font-black uppercase mt-4",children:"Be the first to post!"})]}):b.map(t=>e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-xl border border-slate-100 dark:border-white/5 p-4 mb-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"size-10 rounded-full bg-slate-200 overflow-hidden border border-white/5",children:e.jsx("img",{className:"w-full h-full object-cover",src:t.user.avatarUrl||t.user.image||"https://api.dicebear.com/7.x/avataaars/svg?seed="+t.userId,alt:t.user.name})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold dark:text-white text-slate-900",children:t.user.name}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-white/40 font-bold uppercase tracking-tight",children:p.fromJSDate(new Date(t.createdAt)).toRelative()})]}),e.jsx("button",{className:"ml-auto text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"more_horiz"})})]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-white/90 mb-3 leading-relaxed whitespace-pre-wrap",children:t.content}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-100 dark:border-white/5",children:[e.jsxs("button",{className:"flex items-center gap-1.5 text-slate-500 dark:text-white/60 hover:text-primary transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"favorite"}),e.jsx("span",{className:"text-xs font-medium",children:t.likes||0})]}),e.jsxs("button",{className:"flex items-center gap-1.5 text-slate-500 dark:text-white/60 hover:text-white transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"chat_bubble"}),e.jsx("span",{className:"text-xs font-medium",children:"0"})]}),e.jsx("button",{className:"flex items-center gap-1.5 text-slate-500 dark:text-white/60 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"share"})})]})]},t.id))]})]}),v&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-4",children:e.jsxs("div",{className:"bg-background-dark w-full max-w-md rounded-t-[40px] sm:rounded-[40px] border border-white/10 p-8 pt-6 shadow-2xl animate-in slide-in-from-bottom duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-xl font-black text-white",children:"Share with Fandom"}),e.jsx("button",{onClick:()=>c(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsx("textarea",{autoFocus:!0,value:o,onChange:t=>u(t.target.value),placeholder:"What's happening in the fandom today?",className:"w-full bg-white/5 border border-white/10 rounded-3xl p-6 text-white text-base min-h-[160px] focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all resize-none"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",className:"p-3 rounded-full bg-white/5 text-white/60 hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"image"})}),e.jsx("button",{type:"submit",disabled:l.state!=="idle"||o.length<5,className:"px-8 py-3 rounded-2xl bg-primary text-white font-black text-sm shadow-[0_8px_20px_rgba(238,43,140,0.3)] hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:scale-100",children:l.state!=="idle"?"POSTING...":"POST NOW"})]})]})]})}),e.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-24 right-4 z-40 size-14 rounded-full bg-primary text-white shadow-[0_4px_20px_rgba(238,43,140,0.5)] flex items-center justify-center hover:scale-110 transition-transform active:scale-90",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"edit"})}),e.jsx(P,{})]})});export{R as default};
