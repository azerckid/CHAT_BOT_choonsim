import{w as p,d as u,b as y,a as f,r as x}from"./chunk-WWGJGFF6-C0NtPc5H.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{c as l}from"./utils-BQHNewu7.js";import"./_commonjsHelpers-DaWZu8wl.js";const C=p(function(){const{id:v}=u(),o=y(),{character:r,myContribution:m,affinityValue:b,fandomLevelValue:n}=f(),[s,d]=x.useState("about"),[c,h]=x.useState(!0),a={id:r.id,name:r.name,role:r.role,relationship:n>10?"Close Friend":"Fan",affinity:`${b}%`,fandomLevel:`Lv. ${n}`,intro:r.bio,backstory:r.bio,personalityTraits:[{icon:"sentiment_satisfied",color:"text-yellow-500",label:"#Cheerful"},{icon:"volunteer_activism",color:"text-pink-500",label:"#Empathetic"},{icon:"music_note",color:"text-purple-500",label:"#Musical"},{icon:"nightlight",color:"text-blue-400",label:"#NightOwl"}],interests:[{icon:"headphones",label:"Music",sublabel:"Favorite",color:"bg-blue-500/10 text-blue-500"},{icon:"favorite",label:"Fans",sublabel:"Loved",color:"bg-pink-500/10 text-pink-500"}],heroImage:r.media?.find(t=>t.type==="COVER")?.url||r.media?.find(t=>t.type==="AVATAR")?.url||r.media?.[0]?.url},g=async()=>{try{const t=await fetch("/api/chat/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({characterId:a.id})});if(t.status===401){o("/login");return}if(!t.ok)throw new Error("Failed to create or get conversation");const i=await t.json();i.conversationId&&o(`/chat/${i.conversationId}`)}catch(t){console.error("Navigation error:",t)}};return e.jsxs("div",{className:"bg-background-light dark:bg-background-dark text-gray-900 dark:text-gray-100 font-display selection:bg-primary selection:text-white antialiased overflow-x-hidden min-h-screen max-w-md mx-auto relative pb-24",children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-between p-4 bg-gradient-to-b from-black/60 to-transparent max-w-md mx-auto",children:[e.jsx("button",{onClick:()=>o(-1),className:"flex items-center justify-center w-10 h-10 rounded-full bg-black/20 backdrop-blur-md border border-white/10 text-white transition hover:bg-black/40 active:scale-95",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-black/20 backdrop-blur-md border border-white/10 text-white transition hover:bg-black/40 active:scale-95",children:e.jsx("span",{className:"material-symbols-outlined",children:"share"})}),e.jsx("button",{onClick:()=>h(!c),className:"flex items-center justify-center w-10 h-10 rounded-full bg-black/20 backdrop-blur-md border border-white/10 text-primary transition hover:bg-black/40 active:scale-95",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontVariationSettings:c?"'FILL' 1":"'FILL' 0"},children:"favorite"})})]})]}),e.jsx("div",{className:"relative w-full h-[55vh] min-h-[400px]",children:e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${a.heroImage}')`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-transparent to-transparent"})})}),e.jsxs("div",{className:"relative -mt-16 z-10 w-full bg-background-light dark:bg-background-dark rounded-t-2xl px-5 pt-8 pb-4 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 w-12 h-1.5 rounded-full bg-gray-300 dark:bg-gray-700"}),e.jsxs("div",{className:"absolute top-0 right-5 -translate-y-1/2 bg-surface-dark border border-white/10 rounded-full px-3 py-1 flex items-center gap-2 shadow-lg",children:[e.jsx("span",{className:"material-symbols-outlined text-pink-500 text-sm",children:"favorite"}),e.jsxs("span",{className:"text-white text-xs font-bold",children:[(r.stats?.totalHearts||0).toLocaleString()," Hearts"]})]}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:a.name}),e.jsx("p",{className:"text-primary font-medium text-sm tracking-wide uppercase",children:a.role})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-[16px]",style:{fontVariationSettings:"'FILL' 1"},children:"favorite"}),e.jsx("span",{className:"text-xs font-bold text-primary",children:a.relationship})]})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed mb-6 font-body",children:['"',a.intro,'"']}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 rounded-xl bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.affinity}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider mt-1",children:"Affinity"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 rounded-xl bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.fandomLevel}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider mt-1",children:"Fandom"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 rounded-xl bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/5 cursor-pointer hover:border-primary/50 transition bg-gradient-to-br from-primary/5 to-transparent",children:[e.jsx("span",{className:"text-xl font-bold text-primary",children:m.toLocaleString()}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase tracking-wider mt-1",children:"My Hearts"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Personality Traits"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.personalityTraits.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white dark:bg-surface-dark border border-gray-200 dark:border-white/5 shadow-sm",children:[e.jsx("span",{className:l("material-symbols-outlined text-[18px]",t.color),children:t.icon}),e.jsx("span",{className:"text-xs font-medium dark:text-gray-200",children:t.label})]},i))})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-white/10 mb-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{onClick:()=>d("about"),className:l("pb-3 text-sm transition",s==="about"?"font-bold text-primary border-b-2 border-primary":"font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:"About"}),e.jsx("button",{onClick:()=>d("voice"),className:l("pb-3 text-sm transition",s==="voice"?"font-bold text-primary border-b-2 border-primary":"font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:"Voice"}),e.jsx("button",{onClick:()=>d("gallery"),className:l("pb-3 text-sm transition",s==="gallery"?"font-bold text-primary border-b-2 border-primary":"font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:"Gallery"})]})}),s==="about"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Backstory"}),e.jsx("p",{className:"text-sm leading-relaxed text-gray-600 dark:text-gray-300 font-body whitespace-pre-line",children:a.backstory})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-r from-surface-dark to-background-dark border border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-20 group-hover:opacity-40 transition",children:e.jsx("span",{className:"material-symbols-outlined text-white text-6xl",children:"graphic_eq"})}),e.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Morning Greeting"}),e.jsxs("p",{className:"text-xs text-gray-400 mb-3",children:["0:12 â€¢ Listen to ",a.name,"'s voice"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white shadow-lg hover:scale-105 transition",children:e.jsx("span",{className:"material-symbols-outlined text-[20px] ml-0.5",children:"play_arrow"})}),e.jsx("div",{className:"h-1 flex-1 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full w-1/3 bg-primary rounded-full"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"Interests"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.interests.map((t,i)=>e.jsxs("div",{className:"p-3 rounded-lg bg-white dark:bg-surface-dark border border-gray-100 dark:border-white/5 flex items-center gap-3",children:[e.jsx("div",{className:l("w-10 h-10 rounded-lg flex items-center justify-center",t.color.replace(" text-"," ")),children:e.jsx("span",{className:"material-symbols-outlined",children:t.icon})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold dark:text-white",children:t.label}),e.jsx("p",{className:"text-[10px] text-gray-500",children:t.sublabel})]})]},i))})]}),e.jsx("div",{className:"h-12"})]}),s==="voice"&&e.jsx("div",{className:"text-gray-400 text-sm italic py-10",children:"Voice samples coming soon..."}),s==="gallery"&&e.jsx("div",{className:"text-gray-400 text-sm italic py-10",children:"Gallery coming soon..."})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-lg border-t border-gray-200 dark:border-white/5 z-40 max-w-md mx-auto",children:e.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[e.jsxs("button",{onClick:g,className:"flex-1 flex items-center justify-center gap-2 h-14 bg-primary hover:bg-primary/90 text-white font-bold text-lg rounded-2xl shadow-lg shadow-primary/30 animate-glow transition transform active:scale-95",children:[e.jsx("span",{className:"material-symbols-outlined",children:"chat_bubble"}),"Message ",a.name]}),e.jsx("button",{className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark border border-gray-200 dark:border-white/10 text-gray-400 hover:text-primary transition active:scale-95",children:e.jsx("span",{className:"material-symbols-outlined",children:"videocam"})})]})})]})});export{C as default};
