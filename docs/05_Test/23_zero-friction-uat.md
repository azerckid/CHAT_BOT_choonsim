# NEAR Zero-Friction UX 사용자 인수 테스트(UAT) 가이드

이 문서는 사용자가 직접 애플리케이션을 실행하고, **"Zero-Friction(무마찰)"** 경험이 실제로 작동하는지 검증하기 위한 단계별 가이드입니다.

## 1. 사전 준비 (Prerequisites)

터미널에서 애플리케이션 서버를 실행합니다.

```bash
npm run dev
```

브라우저에서 `http://localhost:3000` (또는 터미널에 표시된 주소)으로 접속합니다.

---

## 2. 테스트 시나리오

### 단계 1: "보이지 않는 지갑" 생성 확인 (Invisible Wallet)
사용자가 별도로 지갑을 생성하거나, 복잡한 비밀번호(Seed Phrase)를 저장하는 과정이 없어야 합니다.

1.  **로그인/회원가입**: 기존 방식(이메일, 소셜 로그인 등)으로 앱에 로그인합니다.
2.  **지갑 확인**: 
    *   앱 내 **[설정(Settings)]** 또는 **[내 프로필(My Profile)]** 메뉴로 이동합니다.
    *   **"NEAR 계정"** 또는 **"지갑 주소"** 항목을 찾습니다.
    *   `user123...rogulus.testnet` 형태의 주소가 자동으로 할당되어 있는지 확인합니다.
    *   *만약 UI가 없다면*: `/api/me` 또는 개발자 도구 콘솔에서 사용자 정보를 확인해야 할 수도 있습니다 (UI 구현 여부 확인 필요).

### 단계 2: 자산 입금 (Deposit)
외부 지갑(MyNearWallet 등)에서 이 앱의 지갑으로 테스트 자산을 보냅니다.

1.  **입금 주소/QR 찾기**:
    *   지갑/프로필 화면에서 **[입금(Deposit)]** 또는 **[QR 코드]** 아이콘을 클릭합니다.
    *   화면에 **NEAR 주소**와 **QR 코드**가 표시되어야 합니다.
2.  **송금 테스트**:
    *   MyNearWallet(https://testnet.mynearwallet.com/)에서 위 주소로 `10 NEAR`를 전송합니다.
    *   잠시 후 앱 내 지갑 잔액이 업데이트되는지 확인합니다.

### 단계 3: 환전 확인 (Exchange)
입금된 NEAR 자산이 앱 내에서 사용 가능한 포인트(CHOCO/Credit)로 인식되는지 확인합니다.

1.  **잔액 확인**:
    *   지갑 화면에서 **NEAR 잔액**과 **전환 가능한 CHOCO/Credit** 수량이 표시되는지 확인합니다.
2.  **자동/수동 환전**:
    *   기획에 따라 자동 변환되었다면 CHOCO 잔액이 늘어나 있어야 합니다.
    *   수동 버튼이 있다면 **[환전]**을 눌러 변환을 시도합니다.

### 단계 4: 가스리스 결제 (Gasless Payment / X402)
이 테스트의 핵심입니다. **NEAR 가스비(수수료)가 사용자 잔액에서 차감되지 않아야 합니다.**

1.  **유료 기능 사용**:
    *   챗봇 대화, 이미지 생성 등 유료 기능을 실행합니다. (또는 테스트 결제 버튼)
2.  **결제 및 잔액 변화 관찰**:
    *   기능 실행 성공 후, 다시 지갑 잔액을 확인합니다.
    *   **CHOCO(포인트)**: 서비스 이용료만큼 차감되어야 함 (예: -10 CHOCO).
    *   **NEAR(코인)**: **잔액이 변하지 않아야 함 (0.0001 NEAR도 줄어들면 실패).**
    *   *설명*: 가스비는 대납 계정(`rogulus.testnet`)이 지불했기 때문입니다.

---

## 3. UI 위치 가이드 (현재 구현 기준)

*(개발자가 구현한 UI 위치를 아래에 구체적으로 명시해야 합니다. 아직 UI가 없다면 "구현 필요"로 표시)*

| 기능 | 메뉴 위치 (예상 경로) | 비고 |
| :--- | :--- | :--- |
| **지갑 정보** | `/settings/wallet` 또는 사이드바 하단 프로필 | 니어 주소 확인 |
| **입금 QR** | 지갑 화면 내 `[Receive]` 버튼 | QR 및 주소 복사 |
| **잔액 표시** | 상단 네비게이션 바 (Top Nav) | CHOCO / Credit 표시 |
| **결제 내역** | `/settings/billing` | 사용 내역 확인 |

---

## 4. 문제 해결 (Troubleshooting)

*   **지갑 주소가 보이지 않음**: 로그인 시 자동 생성 로직이 실패했을 수 있습니다. 로그아웃 후 재로그인 시도.
*   **가스비가 차감됨**: `token.server.ts`의 `delegateAction`이 아닌 일반 전송이 실행된 것입니다. 버그 리포트 필요.
*   **결제 실패 (402)**: 잔액 부족일 수 있습니다. 입금 후 다시 시도하세요.


## Related Documents
- **Test**: [Document Management Plan](./08_DOCUMENT_MANAGEMENT_PLAN.md) - 문서 관리 규칙 및 구조
